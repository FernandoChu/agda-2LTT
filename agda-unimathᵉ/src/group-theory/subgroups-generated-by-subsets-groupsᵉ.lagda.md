# Subgroups generated by subsets of groups

```agda
module group-theory.subgroups-generated-by-subsets-groupsᵉ where
```

<details><summary>Imports</summary>

```agda
open import foundation.action-on-identifications-functionsᵉ
open import foundation.cartesian-product-typesᵉ
open import foundation.coproduct-typesᵉ
open import foundation.dependent-pair-typesᵉ
open import foundation.fibers-of-mapsᵉ
open import foundation.function-typesᵉ
open import foundation.identity-typesᵉ
open import foundation.images-subtypesᵉ
open import foundation.logical-equivalencesᵉ
open import foundation.powersetsᵉ
open import foundation.propositional-truncationsᵉ
open import foundation.propositionsᵉ
open import foundation.pullbacks-subtypesᵉ
open import foundation.singleton-subtypesᵉ
open import foundation.subtypesᵉ
open import foundation.unit-typeᵉ
open import foundation.universe-levelsᵉ

open import group-theory.conjugationᵉ
open import group-theory.groupsᵉ
open import group-theory.homomorphisms-groupsᵉ
open import group-theory.images-of-group-homomorphismsᵉ
open import group-theory.normal-subgroupsᵉ
open import group-theory.pullbacks-subgroupsᵉ
open import group-theory.subgroupsᵉ
open import group-theory.subsets-groupsᵉ
open import group-theory.trivial-subgroupsᵉ

open import lists.concatenation-listsᵉ
open import lists.listsᵉ

open import order-theory.commuting-squares-of-galois-connections-large-posetsᵉ
open import order-theory.commuting-squares-of-order-preserving-maps-large-posetsᵉ
open import order-theory.galois-connections-large-posetsᵉ
open import order-theory.order-preserving-maps-large-posetsᵉ
open import order-theory.order-preserving-maps-large-preordersᵉ
open import order-theory.similarity-of-elements-large-posetsᵉ
open import order-theory.similarity-of-order-preserving-maps-large-posetsᵉ

open import univalent-combinatorics.standard-finite-typesᵉ
```

</details>

## Idea

Ifᵉ `S`ᵉ isᵉ aᵉ subsetᵉ ofᵉ aᵉ groupᵉ `G`,ᵉ thenᵉ theᵉ subgroupᵉ generatedᵉ byᵉ `S`ᵉ isᵉ theᵉ
leastᵉ subgroupᵉ containingᵉ `S`.ᵉ Thisᵉ ideaᵉ expressesᵉ theᵉ universalᵉ propertyᵉ ofᵉ theᵉ
subgroupᵉ generatedᵉ byᵉ aᵉ subsetᵉ ofᵉ aᵉ group.ᵉ Weᵉ willᵉ constructᵉ itᵉ asᵉ theᵉ typeᵉ ofᵉ
finiteᵉ combinationsᵉ ofᵉ elementsᵉ in `S`ᵉ andᵉ ofᵉ inversesᵉ ofᵉ elementsᵉ in `S`.ᵉ Inᵉ
informalᵉ writingᵉ weᵉ willᵉ writeᵉ `⟨S⟩`ᵉ forᵉ theᵉ subgroupᵉ generatedᵉ byᵉ `S`.ᵉ

## Definitions

### The universal property of subgroups generated by a subset of a group

```agda
module _
  {l1ᵉ l2ᵉ l3ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) (Sᵉ : subset-Groupᵉ l2ᵉ Gᵉ)
  (Uᵉ : Subgroupᵉ l3ᵉ Gᵉ)
  where

  is-subgroup-generated-by-subset-Groupᵉ : UUωᵉ
  is-subgroup-generated-by-subset-Groupᵉ =
    {lᵉ : Level} (U'ᵉ : Subgroupᵉ lᵉ Gᵉ) →
    leq-Subgroupᵉ Gᵉ Uᵉ U'ᵉ ↔ᵉ (Sᵉ ⊆ᵉ subset-Subgroupᵉ Gᵉ U'ᵉ)

  contains-subset-is-subgroup-generated-by-subset-Groupᵉ :
    is-subgroup-generated-by-subset-Groupᵉ →
    Sᵉ ⊆ᵉ subset-Subgroupᵉ Gᵉ Uᵉ
  contains-subset-is-subgroup-generated-by-subset-Groupᵉ αᵉ =
    forward-implicationᵉ (αᵉ Uᵉ) (refl-leq-Subgroupᵉ Gᵉ Uᵉ)

  contains-subgroup-generated-by-subset-is-subgroup-generated-by-sbset-Groupᵉ :
    (αᵉ : is-subgroup-generated-by-subset-Groupᵉ) →
    {lᵉ : Level} (U'ᵉ : Subgroupᵉ lᵉ Gᵉ) → (Sᵉ ⊆ᵉ subset-Subgroupᵉ Gᵉ U'ᵉ) →
    leq-Subgroupᵉ Gᵉ Uᵉ U'ᵉ
  contains-subgroup-generated-by-subset-is-subgroup-generated-by-sbset-Groupᵉ
    αᵉ U'ᵉ =
    backward-implicationᵉ (αᵉ U'ᵉ)
```

### Construction of subgroups generated by a subset of a group

#### Formal combinations of elements in `S`

```agda
module _
  {l1ᵉ l2ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) (Sᵉ : subset-Groupᵉ l2ᵉ Gᵉ)
  where

  formal-combination-subset-Groupᵉ : UUᵉ (l1ᵉ ⊔ l2ᵉ)
  formal-combination-subset-Groupᵉ = listᵉ (Finᵉ 2 ×ᵉ type-subtypeᵉ Sᵉ)

  ev-formal-combination-subset-Groupᵉ :
    formal-combination-subset-Groupᵉ → type-Groupᵉ Gᵉ
  ev-formal-combination-subset-Groupᵉ nilᵉ = unit-Groupᵉ Gᵉ
  ev-formal-combination-subset-Groupᵉ (consᵉ (inlᵉ (inrᵉ starᵉ) ,ᵉ xᵉ) lᵉ) =
    mul-Groupᵉ Gᵉ
      ( inv-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ))
      ( ev-formal-combination-subset-Groupᵉ lᵉ)
  ev-formal-combination-subset-Groupᵉ (consᵉ (inrᵉ starᵉ ,ᵉ xᵉ) lᵉ) =
    mul-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ) (ev-formal-combination-subset-Groupᵉ lᵉ)

  preserves-concat-ev-formal-combination-subset-Groupᵉ :
    (uᵉ vᵉ : formal-combination-subset-Groupᵉ) →
    Idᵉ
      ( ev-formal-combination-subset-Groupᵉ (concat-listᵉ uᵉ vᵉ))
      ( mul-Groupᵉ Gᵉ
        ( ev-formal-combination-subset-Groupᵉ uᵉ)
        ( ev-formal-combination-subset-Groupᵉ vᵉ))
  preserves-concat-ev-formal-combination-subset-Groupᵉ nilᵉ vᵉ =
    invᵉ (left-unit-law-mul-Groupᵉ Gᵉ (ev-formal-combination-subset-Groupᵉ vᵉ))
  preserves-concat-ev-formal-combination-subset-Groupᵉ
    ( consᵉ (inlᵉ (inrᵉ starᵉ) ,ᵉ xᵉ) uᵉ)
    ( vᵉ) =
    ( apᵉ
      ( mul-Groupᵉ Gᵉ (inv-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ)))
      ( preserves-concat-ev-formal-combination-subset-Groupᵉ uᵉ vᵉ)) ∙ᵉ
    ( invᵉ
      ( associative-mul-Groupᵉ Gᵉ
        ( inv-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ))
        ( ev-formal-combination-subset-Groupᵉ uᵉ)
        ( ev-formal-combination-subset-Groupᵉ vᵉ)))
  preserves-concat-ev-formal-combination-subset-Groupᵉ
    ( consᵉ (inrᵉ starᵉ ,ᵉ xᵉ) uᵉ)
    ( vᵉ) =
    ( apᵉ
      ( mul-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ))
      ( preserves-concat-ev-formal-combination-subset-Groupᵉ uᵉ vᵉ)) ∙ᵉ
    ( invᵉ
      ( associative-mul-Groupᵉ Gᵉ
        ( inclusion-subtypeᵉ Sᵉ xᵉ)
        ( ev-formal-combination-subset-Groupᵉ uᵉ)
        ( ev-formal-combination-subset-Groupᵉ vᵉ)))

  inv-formal-combination-subset-Groupᵉ :
    formal-combination-subset-Groupᵉ → formal-combination-subset-Groupᵉ
  inv-formal-combination-subset-Groupᵉ nilᵉ = nilᵉ
  inv-formal-combination-subset-Groupᵉ (consᵉ (sᵉ ,ᵉ xᵉ) uᵉ) =
    concat-listᵉ
      ( inv-formal-combination-subset-Groupᵉ uᵉ)
      ( unit-listᵉ (succ-Finᵉ 2 sᵉ ,ᵉ xᵉ))

  preserves-inv-ev-formal-combination-subset-Groupᵉ :
    (uᵉ : formal-combination-subset-Groupᵉ) →
    Idᵉ
      ( ev-formal-combination-subset-Groupᵉ
        ( inv-formal-combination-subset-Groupᵉ uᵉ))
      ( inv-Groupᵉ Gᵉ (ev-formal-combination-subset-Groupᵉ uᵉ))
  preserves-inv-ev-formal-combination-subset-Groupᵉ nilᵉ =
    invᵉ (inv-unit-Groupᵉ Gᵉ)
  preserves-inv-ev-formal-combination-subset-Groupᵉ
    ( consᵉ (inlᵉ (inrᵉ starᵉ) ,ᵉ xᵉ) uᵉ) =
    ( preserves-concat-ev-formal-combination-subset-Groupᵉ
      ( inv-formal-combination-subset-Groupᵉ uᵉ)
      ( unit-listᵉ (inrᵉ starᵉ ,ᵉ xᵉ))) ∙ᵉ
    ( apᵉ
      ( λ yᵉ →
        mul-Groupᵉ Gᵉ yᵉ (mul-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ) (unit-Groupᵉ Gᵉ)))
      ( preserves-inv-ev-formal-combination-subset-Groupᵉ uᵉ)) ∙ᵉ
    ( apᵉ
      ( mul-Groupᵉ Gᵉ (inv-Groupᵉ Gᵉ (ev-formal-combination-subset-Groupᵉ uᵉ)))
      ( ( right-unit-law-mul-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ)) ∙ᵉ
        ( invᵉ (inv-inv-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ))))) ∙ᵉ
    ( invᵉ (distributive-inv-mul-Groupᵉ Gᵉ))
  preserves-inv-ev-formal-combination-subset-Groupᵉ
    ( consᵉ (inrᵉ starᵉ ,ᵉ xᵉ) uᵉ) =
    ( preserves-concat-ev-formal-combination-subset-Groupᵉ
      ( inv-formal-combination-subset-Groupᵉ uᵉ)
      ( unit-listᵉ (inlᵉ (inrᵉ starᵉ) ,ᵉ xᵉ))) ∙ᵉ
    ( apᵉ
      ( mul-Group'ᵉ Gᵉ
        ( mul-Groupᵉ Gᵉ (inv-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ)) (unit-Groupᵉ Gᵉ)))
      ( preserves-inv-ev-formal-combination-subset-Groupᵉ uᵉ)) ∙ᵉ
    ( apᵉ
      ( mul-Groupᵉ Gᵉ (inv-Groupᵉ Gᵉ (ev-formal-combination-subset-Groupᵉ uᵉ)))
      ( right-unit-law-mul-Groupᵉ Gᵉ (inv-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ xᵉ)))) ∙ᵉ
    ( invᵉ (distributive-inv-mul-Groupᵉ Gᵉ))
```

#### The subgroup generated by a subset of a group

```agda
  subset-subgroup-subset-Group'ᵉ : type-Groupᵉ Gᵉ → UUᵉ (l1ᵉ ⊔ l2ᵉ)
  subset-subgroup-subset-Group'ᵉ xᵉ =
    fiberᵉ ev-formal-combination-subset-Groupᵉ xᵉ

  subset-subgroup-subset-Groupᵉ : subset-Groupᵉ (l1ᵉ ⊔ l2ᵉ) Gᵉ
  subset-subgroup-subset-Groupᵉ xᵉ =
    trunc-Propᵉ (subset-subgroup-subset-Group'ᵉ xᵉ)

  is-in-subgroup-subset-Groupᵉ : type-Groupᵉ Gᵉ → UUᵉ (l1ᵉ ⊔ l2ᵉ)
  is-in-subgroup-subset-Groupᵉ xᵉ =
    type-Propᵉ (subset-subgroup-subset-Groupᵉ xᵉ)

  contains-unit-subgroup-subset-Groupᵉ :
    contains-unit-subset-Groupᵉ Gᵉ subset-subgroup-subset-Groupᵉ
  contains-unit-subgroup-subset-Groupᵉ = unit-trunc-Propᵉ (nilᵉ ,ᵉ reflᵉ)

  is-closed-under-multiplication-subgroup-subset-Group'ᵉ :
    {xᵉ yᵉ : type-Groupᵉ Gᵉ} →
    subset-subgroup-subset-Group'ᵉ xᵉ → subset-subgroup-subset-Group'ᵉ yᵉ →
    subset-subgroup-subset-Group'ᵉ (mul-Groupᵉ Gᵉ xᵉ yᵉ)
  pr1ᵉ (is-closed-under-multiplication-subgroup-subset-Group'ᵉ (lᵉ ,ᵉ pᵉ) (kᵉ ,ᵉ qᵉ)) =
    concat-listᵉ lᵉ kᵉ
  pr2ᵉ (is-closed-under-multiplication-subgroup-subset-Group'ᵉ (lᵉ ,ᵉ pᵉ) (kᵉ ,ᵉ qᵉ)) =
    ( preserves-concat-ev-formal-combination-subset-Groupᵉ lᵉ kᵉ) ∙ᵉ
    ( ap-mul-Groupᵉ Gᵉ pᵉ qᵉ)

  is-closed-under-multiplication-subgroup-subset-Groupᵉ :
    is-closed-under-multiplication-subset-Groupᵉ Gᵉ subset-subgroup-subset-Groupᵉ
  is-closed-under-multiplication-subgroup-subset-Groupᵉ Hᵉ Kᵉ =
    apply-twice-universal-property-trunc-Propᵉ Hᵉ Kᵉ
      ( subset-subgroup-subset-Groupᵉ _)
      ( λ H'ᵉ K'ᵉ →
        unit-trunc-Propᵉ
          ( is-closed-under-multiplication-subgroup-subset-Group'ᵉ H'ᵉ K'ᵉ))

  is-closed-under-inverses-subgroup-subset-Group'ᵉ :
    {xᵉ : type-Groupᵉ Gᵉ} →
    subset-subgroup-subset-Group'ᵉ xᵉ →
    subset-subgroup-subset-Group'ᵉ (inv-Groupᵉ Gᵉ xᵉ)
  pr1ᵉ (is-closed-under-inverses-subgroup-subset-Group'ᵉ (lᵉ ,ᵉ pᵉ)) =
    inv-formal-combination-subset-Groupᵉ lᵉ
  pr2ᵉ (is-closed-under-inverses-subgroup-subset-Group'ᵉ (lᵉ ,ᵉ pᵉ)) =
    ( preserves-inv-ev-formal-combination-subset-Groupᵉ lᵉ) ∙ᵉ
    ( apᵉ (inv-Groupᵉ Gᵉ) pᵉ)

  is-closed-under-inverses-subgroup-subset-Groupᵉ :
    is-closed-under-inverses-subset-Groupᵉ Gᵉ subset-subgroup-subset-Groupᵉ
  is-closed-under-inverses-subgroup-subset-Groupᵉ Hᵉ =
    apply-universal-property-trunc-Propᵉ Hᵉ
      ( subset-subgroup-subset-Groupᵉ _)
      ( unit-trunc-Propᵉ ∘ᵉ is-closed-under-inverses-subgroup-subset-Group'ᵉ)

  subgroup-subset-Groupᵉ : Subgroupᵉ (l1ᵉ ⊔ l2ᵉ) Gᵉ
  pr1ᵉ subgroup-subset-Groupᵉ = subset-subgroup-subset-Groupᵉ
  pr1ᵉ (pr2ᵉ subgroup-subset-Groupᵉ) = contains-unit-subgroup-subset-Groupᵉ
  pr1ᵉ (pr2ᵉ (pr2ᵉ subgroup-subset-Groupᵉ)) =
    is-closed-under-multiplication-subgroup-subset-Groupᵉ
  pr2ᵉ (pr2ᵉ (pr2ᵉ subgroup-subset-Groupᵉ)) =
    is-closed-under-inverses-subgroup-subset-Groupᵉ

  contains-subset-subgroup-subset-Groupᵉ :
    Sᵉ ⊆ᵉ subset-subgroup-subset-Groupᵉ
  contains-subset-subgroup-subset-Groupᵉ sᵉ Hᵉ =
    unit-trunc-Propᵉ
      ( ( unit-listᵉ (inrᵉ starᵉ ,ᵉ sᵉ ,ᵉ Hᵉ)) ,ᵉ
        ( right-unit-law-mul-Groupᵉ Gᵉ (inclusion-subtypeᵉ Sᵉ (sᵉ ,ᵉ Hᵉ))))

  contains-formal-combinations-Subgroupᵉ :
    {l3ᵉ : Level} (Uᵉ : Subgroupᵉ l3ᵉ Gᵉ) → Sᵉ ⊆ᵉ subset-Subgroupᵉ Gᵉ Uᵉ →
    (xᵉ : formal-combination-subset-Groupᵉ) →
    is-in-Subgroupᵉ Gᵉ Uᵉ (ev-formal-combination-subset-Groupᵉ xᵉ)
  contains-formal-combinations-Subgroupᵉ Uᵉ Hᵉ nilᵉ =
    contains-unit-Subgroupᵉ Gᵉ Uᵉ
  contains-formal-combinations-Subgroupᵉ Uᵉ Hᵉ (consᵉ (inlᵉ (inrᵉ starᵉ) ,ᵉ sᵉ ,ᵉ Kᵉ) cᵉ) =
    is-closed-under-multiplication-Subgroupᵉ Gᵉ Uᵉ
      ( is-closed-under-inverses-Subgroupᵉ Gᵉ Uᵉ (Hᵉ sᵉ Kᵉ))
      ( contains-formal-combinations-Subgroupᵉ Uᵉ Hᵉ cᵉ)
  contains-formal-combinations-Subgroupᵉ Uᵉ Hᵉ (consᵉ (inrᵉ starᵉ ,ᵉ sᵉ ,ᵉ Kᵉ) cᵉ) =
    is-closed-under-multiplication-Subgroupᵉ Gᵉ Uᵉ
      ( Hᵉ sᵉ Kᵉ)
      ( contains-formal-combinations-Subgroupᵉ Uᵉ Hᵉ cᵉ)

  leq-subgroup-subset-Groupᵉ :
    {lᵉ : Level} (Uᵉ : Subgroupᵉ lᵉ Gᵉ) → (Sᵉ ⊆ᵉ subset-Subgroupᵉ Gᵉ Uᵉ) →
    leq-Subgroupᵉ Gᵉ subgroup-subset-Groupᵉ Uᵉ
  leq-subgroup-subset-Groupᵉ
    Uᵉ Kᵉ xᵉ Hᵉ =
    apply-universal-property-trunc-Propᵉ Hᵉ (subset-Subgroupᵉ Gᵉ Uᵉ xᵉ) Pᵉ
    where
    Pᵉ : subset-subgroup-subset-Group'ᵉ xᵉ → is-in-Subgroupᵉ Gᵉ Uᵉ xᵉ
    Pᵉ (cᵉ ,ᵉ reflᵉ) = contains-formal-combinations-Subgroupᵉ Uᵉ Kᵉ cᵉ
```

#### The subset relation is preserved by generating subgroups

```agda
module _
  {l1ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ)
  where

  preserves-order-subgroup-subset-Groupᵉ :
    {l2ᵉ l3ᵉ : Level} (Sᵉ : subset-Groupᵉ l2ᵉ Gᵉ) (Tᵉ : subset-Groupᵉ l3ᵉ Gᵉ) →
    Sᵉ ⊆ᵉ Tᵉ →
    leq-Subgroupᵉ Gᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ) (subgroup-subset-Groupᵉ Gᵉ Tᵉ)
  preserves-order-subgroup-subset-Groupᵉ Sᵉ Tᵉ Hᵉ =
    leq-subgroup-subset-Groupᵉ
      ( Gᵉ)
      ( Sᵉ)
      ( subgroup-subset-Groupᵉ Gᵉ Tᵉ)
      ( transitive-leq-subtypeᵉ
        ( Sᵉ)
        ( Tᵉ)
        ( subset-subgroup-subset-Groupᵉ Gᵉ Tᵉ)
        ( contains-subset-subgroup-subset-Groupᵉ Gᵉ Tᵉ)
        ( Hᵉ))

  has-same-elements-subgroup-subset-has-same-elements-subset-Groupᵉ :
    {l2ᵉ l3ᵉ : Level} (Sᵉ : subset-Groupᵉ l2ᵉ Gᵉ) (Tᵉ : subset-Groupᵉ l3ᵉ Gᵉ) →
    has-same-elements-subtypeᵉ Sᵉ Tᵉ →
    has-same-elements-Subgroupᵉ Gᵉ
      ( subgroup-subset-Groupᵉ Gᵉ Sᵉ)
      ( subgroup-subset-Groupᵉ Gᵉ Tᵉ)
  pr1ᵉ
    ( has-same-elements-subgroup-subset-has-same-elements-subset-Groupᵉ Sᵉ Tᵉ Hᵉ xᵉ)
    =
    preserves-order-subgroup-subset-Groupᵉ Sᵉ Tᵉ (forward-implicationᵉ ∘ᵉ Hᵉ) xᵉ
  pr2ᵉ
    ( has-same-elements-subgroup-subset-has-same-elements-subset-Groupᵉ Sᵉ Tᵉ Hᵉ xᵉ)
    =
    preserves-order-subgroup-subset-Groupᵉ Tᵉ Sᵉ (backward-implicationᵉ ∘ᵉ Hᵉ) xᵉ

  subgroup-subset-hom-large-poset-Groupᵉ :
    hom-Large-Posetᵉ
      ( λ l2ᵉ → l1ᵉ ⊔ l2ᵉ)
      ( powerset-Large-Posetᵉ (type-Groupᵉ Gᵉ))
      ( Subgroup-Large-Posetᵉ Gᵉ)
  subgroup-subset-hom-large-poset-Groupᵉ =
    make-hom-Large-Preorderᵉ
      ( subgroup-subset-Groupᵉ Gᵉ)
      ( preserves-order-subgroup-subset-Groupᵉ)
```

#### The Galois connection `S ↦ ⟨S⟩`

```agda
module _
  {l1ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ)
  where

  is-subgroup-generated-by-subset-subgroup-subset-Groupᵉ :
    {l2ᵉ : Level} (Sᵉ : subset-Groupᵉ l2ᵉ Gᵉ) →
    is-subgroup-generated-by-subset-Groupᵉ Gᵉ Sᵉ
      ( subgroup-subset-Groupᵉ Gᵉ Sᵉ)
  pr1ᵉ (is-subgroup-generated-by-subset-subgroup-subset-Groupᵉ Sᵉ Uᵉ) Hᵉ =
    transitive-leq-subtypeᵉ Sᵉ
      ( subset-subgroup-subset-Groupᵉ Gᵉ Sᵉ)
      ( subset-Subgroupᵉ Gᵉ Uᵉ)
      ( Hᵉ)
      ( contains-subset-subgroup-subset-Groupᵉ Gᵉ Sᵉ)
  pr2ᵉ (is-subgroup-generated-by-subset-subgroup-subset-Groupᵉ Sᵉ Uᵉ) =
    leq-subgroup-subset-Groupᵉ Gᵉ Sᵉ Uᵉ

  subgroup-subset-galois-connection-Groupᵉ :
    galois-connection-Large-Posetᵉ
      ( λ l2ᵉ → l1ᵉ ⊔ l2ᵉ)
      ( λ lᵉ → lᵉ)
      ( powerset-Large-Posetᵉ (type-Groupᵉ Gᵉ))
      ( Subgroup-Large-Posetᵉ Gᵉ)
  lower-adjoint-galois-connection-Large-Posetᵉ
    subgroup-subset-galois-connection-Groupᵉ =
    subgroup-subset-hom-large-poset-Groupᵉ Gᵉ
  upper-adjoint-galois-connection-Large-Posetᵉ
    subgroup-subset-galois-connection-Groupᵉ =
    subset-subgroup-hom-large-poset-Groupᵉ Gᵉ
  adjoint-relation-galois-connection-Large-Posetᵉ
    subgroup-subset-galois-connection-Groupᵉ Sᵉ =
    is-subgroup-generated-by-subset-subgroup-subset-Groupᵉ Sᵉ
```

## Properties

### If `S` is closed under conjugation, then `⟨S⟩` is normal

```agda
module _
  {l1ᵉ l2ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ)
  (Sᵉ : subset-Groupᵉ l2ᵉ Gᵉ) (Hᵉ : is-closed-under-conjugation-subset-Groupᵉ Gᵉ Sᵉ)
  where

  conjugation-formal-combination-subset-Groupᵉ :
    type-Groupᵉ Gᵉ →
    formal-combination-subset-Groupᵉ Gᵉ Sᵉ → formal-combination-subset-Groupᵉ Gᵉ Sᵉ
  conjugation-formal-combination-subset-Groupᵉ xᵉ nilᵉ = nilᵉ
  conjugation-formal-combination-subset-Groupᵉ xᵉ (consᵉ (bᵉ ,ᵉ yᵉ ,ᵉ sᵉ) zᵉ) =
    consᵉ
      ( (bᵉ ,ᵉ conjugation-Groupᵉ Gᵉ xᵉ yᵉ ,ᵉ Hᵉ xᵉ yᵉ sᵉ))
      ( conjugation-formal-combination-subset-Groupᵉ xᵉ zᵉ)

  preserves-conjugation-ev-formal-combination-subset-Groupᵉ :
    (xᵉ : type-Groupᵉ Gᵉ) (lᵉ : formal-combination-subset-Groupᵉ Gᵉ Sᵉ) →
    ev-formal-combination-subset-Groupᵉ Gᵉ Sᵉ
      ( conjugation-formal-combination-subset-Groupᵉ xᵉ lᵉ) ＝ᵉ
    conjugation-Groupᵉ Gᵉ xᵉ (ev-formal-combination-subset-Groupᵉ Gᵉ Sᵉ lᵉ)
  preserves-conjugation-ev-formal-combination-subset-Groupᵉ xᵉ nilᵉ =
    invᵉ (conjugation-unit-Groupᵉ Gᵉ xᵉ)
  preserves-conjugation-ev-formal-combination-subset-Groupᵉ xᵉ
    ( consᵉ (inlᵉ (inrᵉ starᵉ) ,ᵉ yᵉ ,ᵉ sᵉ) lᵉ) =
    ( ap-mul-Groupᵉ Gᵉ
      ( invᵉ (conjugation-inv-Groupᵉ Gᵉ xᵉ yᵉ))
      ( preserves-conjugation-ev-formal-combination-subset-Groupᵉ xᵉ lᵉ)) ∙ᵉ
    ( invᵉ
      ( distributive-conjugation-mul-Groupᵉ Gᵉ xᵉ
        ( inv-Groupᵉ Gᵉ yᵉ)
        ( ev-formal-combination-subset-Groupᵉ Gᵉ Sᵉ lᵉ)))
  preserves-conjugation-ev-formal-combination-subset-Groupᵉ xᵉ
    ( consᵉ (inrᵉ starᵉ ,ᵉ yᵉ ,ᵉ sᵉ) lᵉ) =
    ( apᵉ
      ( mul-Groupᵉ Gᵉ (conjugation-Groupᵉ Gᵉ xᵉ yᵉ))
      ( preserves-conjugation-ev-formal-combination-subset-Groupᵉ xᵉ lᵉ)) ∙ᵉ
    ( invᵉ
      ( distributive-conjugation-mul-Groupᵉ Gᵉ xᵉ yᵉ
        ( ev-formal-combination-subset-Groupᵉ Gᵉ Sᵉ lᵉ)))

  is-normal-is-closed-under-conjugation-subgroup-subset-Group'ᵉ :
    (xᵉ yᵉ : type-Groupᵉ Gᵉ) → subset-subgroup-subset-Group'ᵉ Gᵉ Sᵉ yᵉ →
    subset-subgroup-subset-Group'ᵉ Gᵉ Sᵉ (conjugation-Groupᵉ Gᵉ xᵉ yᵉ)
  pr1ᵉ
    ( is-normal-is-closed-under-conjugation-subgroup-subset-Group'ᵉ xᵉ ._
      ( lᵉ ,ᵉ reflᵉ)) =
    conjugation-formal-combination-subset-Groupᵉ xᵉ lᵉ
  pr2ᵉ
    ( is-normal-is-closed-under-conjugation-subgroup-subset-Group'ᵉ xᵉ ._
      ( lᵉ ,ᵉ reflᵉ)) =
    preserves-conjugation-ev-formal-combination-subset-Groupᵉ xᵉ lᵉ

  is-normal-is-closed-under-conjugation-subgroup-subset-Groupᵉ :
    is-normal-Subgroupᵉ Gᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ)
  is-normal-is-closed-under-conjugation-subgroup-subset-Groupᵉ xᵉ (yᵉ ,ᵉ hᵉ) =
    apply-universal-property-trunc-Propᵉ hᵉ
      ( subset-subgroup-subset-Groupᵉ Gᵉ Sᵉ (conjugation-Groupᵉ Gᵉ xᵉ yᵉ))
      ( unit-trunc-Propᵉ ∘ᵉ
        is-normal-is-closed-under-conjugation-subgroup-subset-Group'ᵉ xᵉ yᵉ)
```

### Any subgroup `H` of `G` has the same elements as `⟨S⟩` if and only if `H` is generated by `S`

```agda
module _
  {l1ᵉ l2ᵉ l3ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) (Sᵉ : subset-Groupᵉ l2ᵉ Gᵉ)
  (Hᵉ : Subgroupᵉ l3ᵉ Gᵉ)
  where

  is-subgroup-generated-by-subset-has-same-elements-Subgroupᵉ :
    has-same-elements-Subgroupᵉ Gᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ) Hᵉ →
    is-subgroup-generated-by-subset-Groupᵉ Gᵉ Sᵉ Hᵉ
  is-subgroup-generated-by-subset-has-same-elements-Subgroupᵉ sᵉ =
    is-lower-element-sim-galois-connection-Large-Posetᵉ
      ( powerset-Large-Posetᵉ (type-Groupᵉ Gᵉ))
      ( Subgroup-Large-Posetᵉ Gᵉ)
      ( subgroup-subset-galois-connection-Groupᵉ Gᵉ)
      ( Sᵉ)
      ( Hᵉ)
      ( similar-has-same-elements-Subgroupᵉ Gᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ) Hᵉ sᵉ)

  is-subgroup-generated-by-subset-has-same-elements-Subgroup'ᵉ :
    has-same-elements-Subgroupᵉ Gᵉ Hᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ) →
    is-subgroup-generated-by-subset-Groupᵉ Gᵉ Sᵉ Hᵉ
  is-subgroup-generated-by-subset-has-same-elements-Subgroup'ᵉ sᵉ =
    is-lower-element-sim-galois-connection-Large-Posetᵉ
      ( powerset-Large-Posetᵉ (type-Groupᵉ Gᵉ))
      ( Subgroup-Large-Posetᵉ Gᵉ)
      ( subgroup-subset-galois-connection-Groupᵉ Gᵉ)
      ( Sᵉ)
      ( Hᵉ)
      ( symmetric-sim-Large-Posetᵉ
        ( Subgroup-Large-Posetᵉ Gᵉ)
        ( Hᵉ)
        ( subgroup-subset-Groupᵉ Gᵉ Sᵉ)
        ( similar-has-same-elements-Subgroupᵉ Gᵉ Hᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ) sᵉ))

  has-same-elements-is-subgroup-generated-by-subset-Subgroupᵉ :
    is-subgroup-generated-by-subset-Groupᵉ Gᵉ Sᵉ Hᵉ →
    has-same-elements-Subgroupᵉ Gᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ) Hᵉ
  has-same-elements-is-subgroup-generated-by-subset-Subgroupᵉ gᵉ =
    has-same-elements-similar-Subgroupᵉ Gᵉ
      ( subgroup-subset-Groupᵉ Gᵉ Sᵉ)
      ( Hᵉ)
      ( sim-is-lower-element-galois-connection-Large-Posetᵉ
        ( powerset-Large-Posetᵉ (type-Groupᵉ Gᵉ))
        ( Subgroup-Large-Posetᵉ Gᵉ)
        ( subgroup-subset-galois-connection-Groupᵉ Gᵉ)
        ( Sᵉ)
        ( Hᵉ)
        ( gᵉ))
```

### If `f : G → H` is a group homomorphism, then `im f ⟨S⟩ ＝ ⟨im f S⟩`

Thereᵉ areᵉ threeᵉ waysᵉ to stateᵉ thisᵉ factᵉ:

1.ᵉ Theᵉ subgroupᵉ `imᵉ fᵉ ⟨S⟩`ᵉ hasᵉ theᵉ sameᵉ elementsᵉ asᵉ theᵉ subgroupᵉ `⟨imᵉ fᵉ S⟩`.ᵉ
2.ᵉ Theᵉ subgroupᵉ `⟨imᵉ fᵉ S⟩`ᵉ satisfiesᵉ theᵉ universalᵉ propertyᵉ ofᵉ theᵉ imageᵉ ofᵉ theᵉ
   groupᵉ `⟨S⟩`ᵉ underᵉ theᵉ groupᵉ homomorphismᵉ `f`.ᵉ
3.ᵉ Theᵉ subgroupᵉ `imᵉ fᵉ ⟨S⟩`ᵉ satisfiesᵉ theᵉ universalᵉ propertyᵉ ofᵉ theᵉ subgroupᵉ
   generatedᵉ byᵉ theᵉ subsetᵉ `imᵉ fᵉ S`ᵉ ofᵉ `H`.ᵉ

**Proof:**ᵉ Weᵉ proveᵉ theᵉ firstᵉ statement.ᵉ Noteᵉ thatᵉ theᵉ squareᵉ

```text
                    pullbackᵉ fᵉ
   subset-Groupᵉ Gᵉ <------------ᵉ subset-Groupᵉ Hᵉ
         ∧ᵉ                            ∧ᵉ
         |                            |
  Kᵉ ↦ᵉ UKᵉ |                            | Kᵉ ↦ᵉ UKᵉ
         |                            |
     Subgroupᵉ Gᵉ <----------------ᵉ Subgroupᵉ Hᵉ
                    pullbackᵉ fᵉ
```

[commutes](order-theory.commuting-squares-of-order-preserving-maps-large-posets.mdᵉ)
byᵉ reflexivity.ᵉ Byᵉ theᵉ adjointnessᵉ relationsᵉ ofᵉ
[Galoisᵉ connections](order-theory.galois-connections-large-posets.md),ᵉ thisᵉ
impliesᵉ thatᵉ theᵉ squareᵉ

```text
                    imᵉ fᵉ
    subset-Groupᵉ Gᵉ ------>ᵉ subset-Groupᵉ Hᵉ
          |                      |
  Sᵉ ↦ᵉ ⟨S⟩ᵉ |                      | Sᵉ ↦ᵉ ⟨S⟩ᵉ
          |                      |
          ∨ᵉ                      ∨ᵉ
      Subgroupᵉ Gᵉ ---------->ᵉ Subgroupᵉ Hᵉ
                    imᵉ fᵉ
```

commutes.ᵉ Theᵉ remainingᵉ twoᵉ statementsᵉ followᵉ directlyᵉ fromᵉ theᵉ factᵉ thatᵉ ifᵉ aᵉ
subgroupᵉ hasᵉ theᵉ sameᵉ elementsᵉ asᵉ theᵉ imageᵉ ofᵉ aᵉ subgroupᵉ (resp.ᵉ theᵉ subgroupᵉ
generatedᵉ byᵉ aᵉ subset),ᵉ thenᵉ itᵉ satisfiesᵉ theᵉ universalᵉ propertyᵉ ofᵉ theᵉ imageᵉ ofᵉ
aᵉ subgroupᵉ (resp.ᵉ theᵉ subgroupᵉ generatedᵉ byᵉ aᵉ subset).ᵉ

```agda
module _
  {l1ᵉ l2ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) (Hᵉ : Groupᵉ l2ᵉ) (fᵉ : hom-Groupᵉ Gᵉ Hᵉ)
  where

  coherence-square-image-subgroup-subset-Groupᵉ :
    coherence-square-hom-Large-Posetᵉ
      ( powerset-Large-Posetᵉ (type-Groupᵉ Gᵉ))
      ( Subgroup-Large-Posetᵉ Gᵉ)
      ( powerset-Large-Posetᵉ (type-Groupᵉ Hᵉ))
      ( Subgroup-Large-Posetᵉ Hᵉ)
      ( im-subtype-hom-Large-Posetᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ))
      ( subgroup-subset-hom-large-poset-Groupᵉ Gᵉ)
      ( subgroup-subset-hom-large-poset-Groupᵉ Hᵉ)
      ( im-subgroup-hom-large-poset-hom-Groupᵉ Gᵉ Hᵉ fᵉ)
  coherence-square-image-subgroup-subset-Groupᵉ =
    lower-coherence-square-upper-coherence-square-galois-connection-Large-Posetᵉ
      ( powerset-Large-Posetᵉ (type-Groupᵉ Gᵉ))
      ( Subgroup-Large-Posetᵉ Gᵉ)
      ( powerset-Large-Posetᵉ (type-Groupᵉ Hᵉ))
      ( Subgroup-Large-Posetᵉ Hᵉ)
      ( image-pullback-subtype-galois-connection-Large-Posetᵉ
        ( map-hom-Groupᵉ Gᵉ Hᵉ fᵉ))
      ( subgroup-subset-galois-connection-Groupᵉ Gᵉ)
      ( subgroup-subset-galois-connection-Groupᵉ Hᵉ)
      ( image-pullback-galois-connection-Subgroupᵉ Gᵉ Hᵉ fᵉ)
      ( coherence-square-pullback-subset-Subgroupᵉ Gᵉ Hᵉ fᵉ)

  compute-image-subgroup-subset-Groupᵉ :
    {l3ᵉ : Level} (Sᵉ : subset-Groupᵉ l3ᵉ Gᵉ) →
    has-same-elements-Subgroupᵉ Hᵉ
      ( im-hom-Subgroupᵉ Gᵉ Hᵉ fᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ))
      ( subgroup-subset-Groupᵉ Hᵉ (im-subtypeᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) Sᵉ))
  compute-image-subgroup-subset-Groupᵉ Sᵉ =
    has-same-elements-similar-Subgroupᵉ Hᵉ
      ( im-hom-Subgroupᵉ Gᵉ Hᵉ fᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ))
      ( subgroup-subset-Groupᵉ Hᵉ (im-subtypeᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) Sᵉ))
      ( coherence-square-image-subgroup-subset-Groupᵉ Sᵉ)

  is-subgroup-generated-by-subset-image-subgroup-subset-Groupᵉ :
    {l3ᵉ : Level} (Sᵉ : subset-Groupᵉ l3ᵉ Gᵉ) →
    is-subgroup-generated-by-subset-Groupᵉ Hᵉ
      ( im-subtypeᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) Sᵉ)
      ( im-hom-Subgroupᵉ Gᵉ Hᵉ fᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ))
  is-subgroup-generated-by-subset-image-subgroup-subset-Groupᵉ Sᵉ =
    is-subgroup-generated-by-subset-has-same-elements-Subgroup'ᵉ Hᵉ
      ( im-subtypeᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) Sᵉ)
      ( im-hom-Subgroupᵉ Gᵉ Hᵉ fᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ))
      ( compute-image-subgroup-subset-Groupᵉ Sᵉ)

  is-image-im-subgroup-subset-Groupᵉ :
    {l3ᵉ : Level} (Sᵉ : subset-Groupᵉ l3ᵉ Gᵉ) →
    is-image-subgroup-hom-Groupᵉ Gᵉ Hᵉ fᵉ
      ( subgroup-subset-Groupᵉ Gᵉ Sᵉ)
      ( subgroup-subset-Groupᵉ Hᵉ (im-subtypeᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) Sᵉ))
  is-image-im-subgroup-subset-Groupᵉ Sᵉ =
    is-image-subgroup-has-same-elements-Subgroupᵉ Gᵉ Hᵉ fᵉ
      ( subgroup-subset-Groupᵉ Gᵉ Sᵉ)
      ( subgroup-subset-Groupᵉ Hᵉ (im-subtypeᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) Sᵉ))
      ( compute-image-subgroup-subset-Groupᵉ Sᵉ)
```

### The subgroup `⟨S⟩` is trivial if and only if `S ⊆ {e}`

```agda
module _
  {l1ᵉ l2ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) (Sᵉ : subset-Groupᵉ l2ᵉ Gᵉ)
  where

  is-trivial-subgroup-subset-Groupᵉ :
    Sᵉ ⊆ᵉ subtype-standard-singleton-subtypeᵉ (set-Groupᵉ Gᵉ) (unit-Groupᵉ Gᵉ) →
    is-trivial-Subgroupᵉ Gᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ)
  is-trivial-subgroup-subset-Groupᵉ =
    leq-subgroup-subset-Groupᵉ Gᵉ Sᵉ (trivial-Subgroupᵉ Gᵉ)

  leq-singleton-subtype-unit-is-trivial-subgroup-subset-Groupᵉ :
    is-trivial-Subgroupᵉ Gᵉ (subgroup-subset-Groupᵉ Gᵉ Sᵉ) →
    Sᵉ ⊆ᵉ subtype-standard-singleton-subtypeᵉ (set-Groupᵉ Gᵉ) (unit-Groupᵉ Gᵉ)
  leq-singleton-subtype-unit-is-trivial-subgroup-subset-Groupᵉ Hᵉ =
    transitive-leq-subtypeᵉ Sᵉ
      ( subset-subgroup-subset-Groupᵉ Gᵉ Sᵉ)
      ( subtype-standard-singleton-subtypeᵉ (set-Groupᵉ Gᵉ) (unit-Groupᵉ Gᵉ))
      ( Hᵉ)
      ( contains-subset-subgroup-subset-Groupᵉ Gᵉ Sᵉ)
```