# Subgroups generated by families of elements

```agda
module group-theory.subgroups-generated-by-families-of-elements-groupsᵉ where
```

<details><summary>Imports</summary>

```agda
open import foundation.dependent-pair-typesᵉ
open import foundation.function-typesᵉ
open import foundation.identity-typesᵉ
open import foundation.imagesᵉ
open import foundation.images-subtypesᵉ
open import foundation.logical-equivalencesᵉ
open import foundation.propositional-truncationsᵉ
open import foundation.subtypesᵉ
open import foundation.universal-property-imageᵉ
open import foundation.universe-levelsᵉ

open import group-theory.groupsᵉ
open import group-theory.homomorphisms-groupsᵉ
open import group-theory.images-of-group-homomorphismsᵉ
open import group-theory.subgroupsᵉ
open import group-theory.subgroups-generated-by-subsets-groupsᵉ
open import group-theory.subsets-groupsᵉ
open import group-theory.trivial-subgroupsᵉ
```

</details>

## Idea

Considerᵉ aᵉ familyᵉ `(xᵢ)ᵢ`ᵉ ofᵉ elementsᵉ in aᵉ [group](group-theory.groups.mdᵉ) `G`.ᵉ
Theᵉ **subgroupᵉ generatedᵉ by**ᵉ `(xᵢ)ᵢ`ᵉ isᵉ theᵉ
[subgroupᵉ generatedᵉ byᵉ theᵉ subset](group-theory.subgroups-generated-by-subsets-groups.mdᵉ)
ofᵉ allᵉ theᵉ elementsᵉ ofᵉ theᵉ formᵉ `xᵢ`ᵉ forᵉ someᵉ `i`ᵉ in theᵉ indexingᵉ typeᵉ ofᵉ
`(xᵢ)ᵢ`.ᵉ Inᵉ otherᵉ words,ᵉ theᵉ subgroupᵉ generatedᵉ byᵉ `(xᵢ)ᵢ`ᵉ isᵉ theᵉ leastᵉ
[subgroup](group-theory.subgroups.mdᵉ) thatᵉ containsᵉ allᵉ theᵉ elementsᵉ `xᵢ`.ᵉ Inᵉ
informalᵉ writing,ᵉ theᵉ subgroupᵉ generatedᵉ byᵉ theᵉ familyᵉ ofᵉ elementsᵉ `(xᵢ)ᵢ`ᵉ isᵉ
denotedᵉ byᵉ `⟨xᵢ⟩`ᵉ

## Definitions

### The predicate of being a subgroup generated by a family of elements

```agda
module _
  {l1ᵉ l2ᵉ l3ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) {Iᵉ : UUᵉ l2ᵉ} (xᵉ : Iᵉ → type-Groupᵉ Gᵉ)
  (Hᵉ : Subgroupᵉ l3ᵉ Gᵉ)
  where

  is-subgroup-generated-by-family-of-elements-Groupᵉ : UUωᵉ
  is-subgroup-generated-by-family-of-elements-Groupᵉ =
    {l4ᵉ : Level} (Kᵉ : Subgroupᵉ l4ᵉ Gᵉ) →
    leq-Subgroupᵉ Gᵉ Hᵉ Kᵉ ↔ᵉ ((iᵉ : Iᵉ) → is-in-Subgroupᵉ Gᵉ Kᵉ (xᵉ iᵉ))

  contains-element-is-subgroup-generated-by-family-of-elements-Groupᵉ :
    is-subgroup-generated-by-family-of-elements-Groupᵉ →
    (iᵉ : Iᵉ) → is-in-Subgroupᵉ Gᵉ Hᵉ (xᵉ iᵉ)
  contains-element-is-subgroup-generated-by-family-of-elements-Groupᵉ
    Uᵉ =
    forward-implicationᵉ (Uᵉ Hᵉ) (refl-leq-Subgroupᵉ Gᵉ Hᵉ)

  leq-subgroup-is-subgroup-generated-by-family-of-elements-Groupᵉ :
    is-subgroup-generated-by-family-of-elements-Groupᵉ →
    {l4ᵉ : Level} (Kᵉ : Subgroupᵉ l4ᵉ Gᵉ) (kᵉ : (iᵉ : Iᵉ) → is-in-Subgroupᵉ Gᵉ Kᵉ (xᵉ iᵉ)) →
    leq-Subgroupᵉ Gᵉ Hᵉ Kᵉ
  leq-subgroup-is-subgroup-generated-by-family-of-elements-Groupᵉ Uᵉ Kᵉ =
    backward-implicationᵉ (Uᵉ Kᵉ)
```

### The subgroup generated by a family of elements in a group

```agda
module _
  {l1ᵉ l2ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) {Iᵉ : UUᵉ l2ᵉ} (xᵉ : Iᵉ → type-Groupᵉ Gᵉ)
  where

  generating-subset-subgroup-family-of-elements-Groupᵉ : subset-Groupᵉ (l1ᵉ ⊔ l2ᵉ) Gᵉ
  generating-subset-subgroup-family-of-elements-Groupᵉ = subtype-imᵉ xᵉ

  subgroup-family-of-elements-Groupᵉ : Subgroupᵉ (l1ᵉ ⊔ l2ᵉ) Gᵉ
  subgroup-family-of-elements-Groupᵉ =
    subgroup-subset-Groupᵉ Gᵉ generating-subset-subgroup-family-of-elements-Groupᵉ

  subset-subgroup-family-of-elements-Groupᵉ : subset-Groupᵉ (l1ᵉ ⊔ l2ᵉ) Gᵉ
  subset-subgroup-family-of-elements-Groupᵉ =
    subset-Subgroupᵉ Gᵉ subgroup-family-of-elements-Groupᵉ

  is-in-subgroup-family-of-elements-Groupᵉ : type-Groupᵉ Gᵉ → UUᵉ (l1ᵉ ⊔ l2ᵉ)
  is-in-subgroup-family-of-elements-Groupᵉ =
    is-in-Subgroupᵉ Gᵉ subgroup-family-of-elements-Groupᵉ

  is-closed-under-eq-subgroup-family-of-elements-Groupᵉ :
    {xᵉ yᵉ : type-Groupᵉ Gᵉ} → is-in-subgroup-family-of-elements-Groupᵉ xᵉ →
    xᵉ ＝ᵉ yᵉ → is-in-subgroup-family-of-elements-Groupᵉ yᵉ
  is-closed-under-eq-subgroup-family-of-elements-Groupᵉ =
    is-closed-under-eq-Subgroupᵉ Gᵉ subgroup-family-of-elements-Groupᵉ

  is-closed-under-eq-subgroup-family-of-elements-Group'ᵉ :
    {xᵉ yᵉ : type-Groupᵉ Gᵉ} → is-in-subgroup-family-of-elements-Groupᵉ yᵉ →
    xᵉ ＝ᵉ yᵉ → is-in-subgroup-family-of-elements-Groupᵉ xᵉ
  is-closed-under-eq-subgroup-family-of-elements-Group'ᵉ =
    is-closed-under-eq-Subgroup'ᵉ Gᵉ subgroup-family-of-elements-Groupᵉ

  contains-unit-subgroup-family-of-elements-Groupᵉ :
    contains-unit-subset-Groupᵉ Gᵉ subset-subgroup-family-of-elements-Groupᵉ
  contains-unit-subgroup-family-of-elements-Groupᵉ =
    contains-unit-Subgroupᵉ Gᵉ subgroup-family-of-elements-Groupᵉ

  is-closed-under-multiplication-subgroup-family-of-elements-Groupᵉ :
    is-closed-under-multiplication-subset-Groupᵉ Gᵉ
      subset-subgroup-family-of-elements-Groupᵉ
  is-closed-under-multiplication-subgroup-family-of-elements-Groupᵉ =
    is-closed-under-multiplication-Subgroupᵉ Gᵉ subgroup-family-of-elements-Groupᵉ

  is-closed-under-inverses-subgroup-family-of-elements-Groupᵉ :
    is-closed-under-inverses-subset-Groupᵉ Gᵉ
      subset-subgroup-family-of-elements-Groupᵉ
  is-closed-under-inverses-subgroup-family-of-elements-Groupᵉ =
    is-closed-under-inverses-Subgroupᵉ Gᵉ subgroup-family-of-elements-Groupᵉ

  abstract
    is-subgroup-generated-by-family-of-elements-subgroup-family-of-elements-Groupᵉ :
      is-subgroup-generated-by-family-of-elements-Groupᵉ Gᵉ xᵉ
        subgroup-family-of-elements-Groupᵉ
    is-subgroup-generated-by-family-of-elements-subgroup-family-of-elements-Groupᵉ
      Hᵉ =
      logical-equivalence-reasoningᵉ
        leq-Subgroupᵉ Gᵉ subgroup-family-of-elements-Groupᵉ Hᵉ
        ↔ᵉ generating-subset-subgroup-family-of-elements-Groupᵉ ⊆ᵉ
          subset-Subgroupᵉ Gᵉ Hᵉ
          byᵉ
          is-subgroup-generated-by-subset-subgroup-subset-Groupᵉ Gᵉ
            ( subtype-imᵉ xᵉ)
            ( Hᵉ)
        ↔ᵉ ((iᵉ : Iᵉ) → is-in-Subgroupᵉ Gᵉ Hᵉ (xᵉ iᵉ))
          byᵉ is-image-subtype-subtype-imᵉ xᵉ (subset-Subgroupᵉ Gᵉ Hᵉ)

  abstract
    contains-element-subgroup-family-of-elements-Groupᵉ :
      (iᵉ : Iᵉ) → is-in-subgroup-family-of-elements-Groupᵉ (xᵉ iᵉ)
    contains-element-subgroup-family-of-elements-Groupᵉ iᵉ =
      contains-subset-subgroup-subset-Groupᵉ Gᵉ
        ( generating-subset-subgroup-family-of-elements-Groupᵉ)
        ( xᵉ iᵉ)
        ( unit-trunc-Propᵉ (iᵉ ,ᵉ reflᵉ))

  abstract
    leq-subgroup-family-of-elements-Groupᵉ :
      {lᵉ : Level} (Hᵉ : Subgroupᵉ lᵉ Gᵉ) →
      ((iᵉ : Iᵉ) → is-in-Subgroupᵉ Gᵉ Hᵉ (xᵉ iᵉ)) →
      leq-Subgroupᵉ Gᵉ subgroup-family-of-elements-Groupᵉ Hᵉ
    leq-subgroup-family-of-elements-Groupᵉ Hᵉ =
      backward-implicationᵉ
        ( is-subgroup-generated-by-family-of-elements-subgroup-family-of-elements-Groupᵉ
          Hᵉ)
```

## Properties

### Any two subgroups generated by the same family of elements contain the same elements

```agda
module _
  {l1ᵉ l2ᵉ l3ᵉ l4ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) {Iᵉ : UUᵉ l2ᵉ} (xᵉ : Iᵉ → type-Groupᵉ Gᵉ)
  (Hᵉ : Subgroupᵉ l3ᵉ Gᵉ)
  (Huᵉ : is-subgroup-generated-by-family-of-elements-Groupᵉ Gᵉ xᵉ Hᵉ)
  (Kᵉ : Subgroupᵉ l4ᵉ Gᵉ)
  (Kuᵉ : is-subgroup-generated-by-family-of-elements-Groupᵉ Gᵉ xᵉ Kᵉ)
  where

  has-same-elements-is-subgroup-generated-by-family-of-elements-Groupᵉ :
    has-same-elements-Subgroupᵉ Gᵉ Hᵉ Kᵉ
  pr1ᵉ (has-same-elements-is-subgroup-generated-by-family-of-elements-Groupᵉ yᵉ) =
    leq-subgroup-is-subgroup-generated-by-family-of-elements-Groupᵉ Gᵉ xᵉ Hᵉ Huᵉ Kᵉ
      ( contains-element-is-subgroup-generated-by-family-of-elements-Groupᵉ Gᵉ xᵉ
        ( Kᵉ)
        ( Kuᵉ))
      ( yᵉ)
  pr2ᵉ (has-same-elements-is-subgroup-generated-by-family-of-elements-Groupᵉ yᵉ) =
    leq-subgroup-is-subgroup-generated-by-family-of-elements-Groupᵉ Gᵉ xᵉ Kᵉ Kuᵉ Hᵉ
      ( contains-element-is-subgroup-generated-by-family-of-elements-Groupᵉ Gᵉ xᵉ
        ( Hᵉ)
        ( Huᵉ))
      ( yᵉ)
```

### Any subgroup that has the same elements as the subgroup generated by a family of elements `x` satisfies the universal property of the subgroup generated by the family of elements `x`

```agda
module _
  {l1ᵉ l2ᵉ l3ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) {Iᵉ : UUᵉ l2ᵉ} (xᵉ : Iᵉ → type-Groupᵉ Gᵉ)
  (Hᵉ : Subgroupᵉ l3ᵉ Gᵉ)
  where

  is-subgroup-generated-by-family-of-elements-has-same-elements-Subgroupᵉ :
    has-same-elements-Subgroupᵉ Gᵉ (subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ) Hᵉ →
    is-subgroup-generated-by-family-of-elements-Groupᵉ Gᵉ xᵉ Hᵉ
  is-subgroup-generated-by-family-of-elements-has-same-elements-Subgroupᵉ pᵉ Uᵉ =
    logical-equivalence-reasoningᵉ
      leq-Subgroupᵉ Gᵉ Hᵉ Uᵉ
      ↔ᵉ subtype-imᵉ xᵉ ⊆ᵉ subset-Subgroupᵉ Gᵉ Uᵉ
        byᵉ
        is-subgroup-generated-by-subset-has-same-elements-Subgroupᵉ Gᵉ
          ( subtype-imᵉ xᵉ)
          ( Hᵉ)
          ( pᵉ)
          ( Uᵉ)
      ↔ᵉ ((iᵉ : Iᵉ) → is-in-Subgroupᵉ Gᵉ Uᵉ (xᵉ iᵉ))
        byᵉ
        is-image-subtype-subtype-imᵉ xᵉ (subset-Subgroupᵉ Gᵉ Uᵉ)
```

### The image of the subgroup `⟨x⟩` generated by a family of elements `x` under a group homomorphism `f` is the subgroup `⟨f ∘ x⟩` generated by the family of elements `f ∘ x`

Thereᵉ areᵉ threeᵉ waysᵉ to stateᵉ thisᵉ factᵉ:

1.ᵉ Theᵉ imageᵉ ofᵉ theᵉ subgroupᵉ `⟨x⟩`ᵉ underᵉ theᵉ groupᵉ homomorphismᵉ `f`ᵉ hasᵉ theᵉ sameᵉ
   elementsᵉ asᵉ theᵉ subgroupᵉ `⟨fᵉ ∘ᵉ x⟩`.ᵉ
2.ᵉ Theᵉ subgroupᵉ `⟨fᵉ ∘ᵉ x⟩`ᵉ satisfiesᵉ theᵉ universalᵉ propertyᵉ ofᵉ theᵉ imageᵉ ofᵉ theᵉ
   groupᵉ `⟨x⟩`ᵉ underᵉ theᵉ groupᵉ homomorphismᵉ `f`.ᵉ
3.ᵉ Theᵉ imageᵉ ofᵉ theᵉ subgroupᵉ `⟨x⟩`ᵉ underᵉ theᵉ groupᵉ homomorphismᵉ `f`ᵉ satisfiesᵉ
   theᵉ universalᵉ propertyᵉ ofᵉ theᵉ subgroupᵉ generatedᵉ byᵉ theᵉ familyᵉ ofᵉ elementsᵉ
   `fᵉ ∘ᵉ x`.ᵉ

```agda
module _
  {l1ᵉ l2ᵉ l3ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) (Hᵉ : Groupᵉ l2ᵉ) (fᵉ : hom-Groupᵉ Gᵉ Hᵉ)
  {Iᵉ : UUᵉ l3ᵉ} (xᵉ : Iᵉ → type-Groupᵉ Gᵉ)
  where

  compute-image-subgroup-family-of-elements-Groupᵉ :
    has-same-elements-Subgroupᵉ Hᵉ
      ( im-hom-Subgroupᵉ Gᵉ Hᵉ fᵉ (subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ))
      ( subgroup-family-of-elements-Groupᵉ Hᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ ∘ᵉ xᵉ))
  compute-image-subgroup-family-of-elements-Groupᵉ hᵉ =
    logical-equivalence-reasoningᵉ
      is-in-im-hom-Subgroupᵉ Gᵉ Hᵉ fᵉ (subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ) hᵉ
      ↔ᵉ is-in-subgroup-subset-Groupᵉ Hᵉ
          ( im-subtypeᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) (subtype-imᵉ xᵉ))
          ( hᵉ)
        byᵉ
        compute-image-subgroup-subset-Groupᵉ Gᵉ Hᵉ fᵉ (subtype-imᵉ xᵉ) hᵉ
      ↔ᵉ is-in-subgroup-family-of-elements-Groupᵉ Hᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ ∘ᵉ xᵉ) hᵉ
        byᵉ
        inv-iffᵉ
          ( has-same-elements-subgroup-subset-has-same-elements-subset-Groupᵉ Hᵉ
            ( subtype-imᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ ∘ᵉ xᵉ))
            ( im-subtypeᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) (subtype-imᵉ xᵉ))
            ( compute-subtype-im-compᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ) xᵉ)
            ( hᵉ))

  is-image-subgroup-family-of-elements-Groupᵉ :
    is-image-subgroup-hom-Groupᵉ Gᵉ Hᵉ fᵉ
      ( subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ)
      ( subgroup-family-of-elements-Groupᵉ Hᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ ∘ᵉ xᵉ))
  is-image-subgroup-family-of-elements-Groupᵉ =
    is-image-subgroup-has-same-elements-Subgroupᵉ Gᵉ Hᵉ fᵉ
      ( subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ)
      ( subgroup-family-of-elements-Groupᵉ Hᵉ (map-hom-Groupᵉ Gᵉ Hᵉ fᵉ ∘ᵉ xᵉ))
      ( compute-image-subgroup-family-of-elements-Groupᵉ)

  is-subgroup-generated-by-family-of-elements-image-subgroup-family-of-elements-Groupᵉ :
    is-subgroup-generated-by-family-of-elements-Groupᵉ Hᵉ
      ( map-hom-Groupᵉ Gᵉ Hᵉ fᵉ ∘ᵉ xᵉ)
      ( im-hom-Subgroupᵉ Gᵉ Hᵉ fᵉ (subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ))
  is-subgroup-generated-by-family-of-elements-image-subgroup-family-of-elements-Groupᵉ =
    is-subgroup-generated-by-family-of-elements-has-same-elements-Subgroupᵉ Hᵉ
      ( map-hom-Groupᵉ Gᵉ Hᵉ fᵉ ∘ᵉ xᵉ)
      ( im-hom-Subgroupᵉ Gᵉ Hᵉ fᵉ (subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ))
      ( inv-iffᵉ ∘ᵉ compute-image-subgroup-family-of-elements-Groupᵉ)
```

### The subgroup `⟨xᵢ⟩` is trivial if and only if `unit-Group G ＝ xᵢ` for every `i`

```agda
module _
  {l1ᵉ l2ᵉ : Level} (Gᵉ : Groupᵉ l1ᵉ) {Iᵉ : UUᵉ l2ᵉ} (xᵉ : Iᵉ → type-Groupᵉ Gᵉ)
  where

  is-trivial-subgroup-family-of-elements-Groupᵉ :
    ((iᵉ : Iᵉ) → is-unit-Group'ᵉ Gᵉ (xᵉ iᵉ)) →
    is-trivial-Subgroupᵉ Gᵉ (subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ)
  is-trivial-subgroup-family-of-elements-Groupᵉ =
    leq-subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ (trivial-Subgroupᵉ Gᵉ)

  is-family-of-units-is-trivial-subgroup-family-of-elements-Groupᵉ :
    is-trivial-Subgroupᵉ Gᵉ (subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ) →
    (iᵉ : Iᵉ) → is-unit-Group'ᵉ Gᵉ (xᵉ iᵉ)
  is-family-of-units-is-trivial-subgroup-family-of-elements-Groupᵉ Hᵉ iᵉ =
    Hᵉ (xᵉ iᵉ) (contains-element-subgroup-family-of-elements-Groupᵉ Gᵉ xᵉ iᵉ)
```