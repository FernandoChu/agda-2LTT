# The underlying trees of elements of W-types

```agda
module trees.underlying-trees-of-elements-of-w-typesрхЅ where
```

<details><summary>Imports</summary>

```agda
open import foundation.contractible-typesрхЅ
open import foundation.coproduct-typesрхЅ
open import foundation.dependent-pair-typesрхЅ
open import foundation.empty-typesрхЅ
open import foundation.equivalence-extensionalityрхЅ
open import foundation.equivalencesрхЅ
open import foundation.function-typesрхЅ
open import foundation.homotopiesрхЅ
open import foundation.identity-typesрхЅ
open import foundation.isolated-elementsрхЅ
open import foundation.negated-equalityрхЅ
open import foundation.propositionsрхЅ
open import foundation.torsorial-type-familiesрхЅ
open import foundation.transport-along-identificationsрхЅ
open import foundation.universe-levelsрхЅ

open import graph-theory.directed-graphsрхЅ
open import graph-theory.morphisms-directed-graphsрхЅ
open import graph-theory.walks-directed-graphsрхЅ

open import trees.combinator-directed-treesрхЅ
open import trees.combinator-enriched-directed-treesрхЅ
open import trees.directed-treesрхЅ
open import trees.elementhood-relation-w-typesрхЅ
open import trees.enriched-directed-treesрхЅ
open import trees.equivalences-directed-treesрхЅ
open import trees.equivalences-enriched-directed-treesрхЅ
open import trees.underlying-trees-elements-coalgebras-polynomial-endofunctorsрхЅ
open import trees.w-typesрхЅ
```

</details>

## Idea

TheрхЅ **underlyingрхЅ (enrichedрхЅ) directedрхЅ tree**рхЅ ofрхЅ anрхЅ elementрхЅ ofрхЅ aрхЅ W-typeрхЅ isрхЅ theрхЅ
underlyingрхЅ (enrichedрхЅ) directedрхЅ treeрхЅ ofрхЅ thatрхЅ elementрхЅ obtainedрхЅ viaрхЅ theрхЅ coalgebraрхЅ
structureрхЅ ofрхЅ `­ЮЋјрхЅ AрхЅ B`.рхЅ

## Definitions

### The underlying enriched directed tree of an element of a W-type

```agda
module _
  {l1рхЅ l2рхЅ : Level} {AрхЅ : UUрхЅ l1рхЅ} {BрхЅ : AрхЅ Рєњ UUрхЅ l2рхЅ}
  where

  enriched-directed-tree-element-­ЮЋјрхЅ :
    ­ЮЋјрхЅ AрхЅ BрхЅ Рєњ Enriched-Directed-TreeрхЅ (l1рхЅ Ріћ l2рхЅ) (l1рхЅ Ріћ l2рхЅ) AрхЅ BрхЅ
  enriched-directed-tree-element-­ЮЋјрхЅ =
    enriched-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
```

#### The underlying graph of an element of a W-type

```agda
  graph-element-­ЮЋјрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ Рєњ Directed-GraphрхЅ (l1рхЅ Ріћ l2рхЅ) (l1рхЅ Ріћ l2рхЅ)
  graph-element-­ЮЋјрхЅ = graph-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  external-graph-element-­ЮЋјрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ Рєњ Directed-GraphрхЅ (l1рхЅ Ріћ l2рхЅ) (l1рхЅ Ріћ l2рхЅ)
  external-graph-element-­ЮЋјрхЅ = external-graph-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  node-external-graph-element-­ЮЋјрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ Рєњ UUрхЅ (l1рхЅ Ріћ l2рхЅ)
  node-external-graph-element-­ЮЋјрхЅ =
    node-external-graph-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  edge-external-graph-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ yрхЅ : node-external-graph-element-­ЮЋјрхЅ wрхЅ) Рєњ UUрхЅ (l1рхЅ Ріћ l2рхЅ)
  edge-external-graph-element-­ЮЋјрхЅ =
    edge-external-graph-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  inclusion-graph-element-­ЮЋјрхЅ :
    {uрхЅ vрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} Рєњ uрхЅ Рѕѕ-­ЮЋјрхЅ vрхЅ Рєњ
    hom-Directed-GraphрхЅ (graph-element-­ЮЋјрхЅ uрхЅ) (graph-element-­ЮЋјрхЅ vрхЅ)
  inclusion-graph-element-­ЮЋјрхЅ = inclusion-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
```

#### Nodes of the underlying directed tree of an element of a W-type

```agda
  node-element-­ЮЋјрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ Рєњ UUрхЅ (l1рхЅ Ріћ l2рхЅ)
  node-element-­ЮЋјрхЅ = node-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  node-inclusion-element-­ЮЋјрхЅ :
    {uрхЅ vрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} Рєњ (uрхЅ Рѕѕ-­ЮЋјрхЅ vрхЅ) Рєњ node-element-­ЮЋјрхЅ uрхЅ Рєњ node-element-­ЮЋјрхЅ vрхЅ
  node-inclusion-element-­ЮЋјрхЅ = node-inclusion-element-coalgebraрхЅ
```

#### The root of the underlying directed tree of an element of a W-type

```agda
  root-­ЮЋјрхЅ : (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) Рєњ node-element-­ЮЋјрхЅ wрхЅ
  root-­ЮЋјрхЅ = root-coalgebraрхЅ

  is-root-node-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ UUрхЅ (l1рхЅ Ріћ l2рхЅ)
  is-root-node-element-­ЮЋјрхЅ = is-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-isolated-root-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) Рєњ is-isolatedрхЅ (root-­ЮЋјрхЅ wрхЅ)
  is-isolated-root-element-­ЮЋјрхЅ =
    is-isolated-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-contr-loop-space-root-graph-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) Рєњ is-contrрхЅ (root-­ЮЋјрхЅ wрхЅ №╝ЮрхЅ root-­ЮЋјрхЅ wрхЅ)
  is-contr-loop-space-root-graph-element-­ЮЋјрхЅ =
    is-contr-loop-space-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
```

#### The edges of the underlying directed tree of an element of a W-type

```agda
  edge-element-­ЮЋјрхЅ : (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ UUрхЅ (l1рхЅ Ріћ l2рхЅ)
  edge-element-­ЮЋјрхЅ = edge-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  edge-to-root-element-­ЮЋјрхЅ :
    {uрхЅ vрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} (HрхЅ : uрхЅ Рѕѕ-­ЮЋјрхЅ vрхЅ) Рєњ
    edge-element-­ЮЋјрхЅ vрхЅ
      ( node-inclusion-element-­ЮЋјрхЅ HрхЅ (root-­ЮЋјрхЅ uрхЅ))
      ( root-­ЮЋјрхЅ vрхЅ)
  edge-to-root-element-­ЮЋјрхЅ = edge-to-root-element-coalgebraрхЅ

  edge-inclusion-element-­ЮЋјрхЅ :
    {uрхЅ vрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} (HрхЅ : uрхЅ Рѕѕ-­ЮЋјрхЅ vрхЅ) Рєњ
    {xрхЅ yрхЅ : node-element-­ЮЋјрхЅ uрхЅ} (eрхЅ : edge-element-­ЮЋјрхЅ uрхЅ xрхЅ yрхЅ) Рєњ
    edge-element-­ЮЋјрхЅ vрхЅ
      ( node-inclusion-element-­ЮЋјрхЅ HрхЅ xрхЅ)
      ( node-inclusion-element-­ЮЋјрхЅ HрхЅ yрхЅ)
  edge-inclusion-element-­ЮЋјрхЅ = edge-inclusion-element-coalgebraрхЅ

  is-contr-edge-to-root-element-­ЮЋјрхЅ :
    {uрхЅ vрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} (HрхЅ : uрхЅ Рѕѕ-­ЮЋјрхЅ vрхЅ) Рєњ
    is-contrрхЅ
      ( edge-element-­ЮЋјрхЅ vрхЅ
        ( node-inclusion-element-­ЮЋјрхЅ HрхЅ (root-­ЮЋјрхЅ uрхЅ))
        ( root-­ЮЋјрхЅ vрхЅ))
  is-contr-edge-to-root-element-­ЮЋјрхЅ =
    is-contr-edge-to-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-proof-irrelevant-edge-to-root-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    is-proof-irrelevantрхЅ (edge-element-­ЮЋјрхЅ wрхЅ xрхЅ (root-­ЮЋјрхЅ wрхЅ))
  is-proof-irrelevant-edge-to-root-element-­ЮЋјрхЅ =
    is-proof-irrelevant-edge-to-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-prop-edge-to-root-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    is-propрхЅ (edge-element-­ЮЋјрхЅ wрхЅ xрхЅ (root-­ЮЋјрхЅ wрхЅ))
  is-prop-edge-to-root-element-­ЮЋјрхЅ =
    is-prop-edge-to-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  no-edge-from-root-graph-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) Рєњ
    is-emptyрхЅ (╬БрхЅ (node-element-­ЮЋјрхЅ wрхЅ) (edge-element-­ЮЋјрхЅ wрхЅ (root-­ЮЋјрхЅ wрхЅ)))
  no-edge-from-root-graph-element-­ЮЋјрхЅ =
    no-edge-from-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-empty-eq-root-node-inclusion-element-­ЮЋјрхЅ :
    {vрхЅ wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} (HрхЅ : vрхЅ Рѕѕ-­ЮЋјрхЅ wрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ vрхЅ) Рєњ
    root-­ЮЋјрхЅ wрхЅ РЅархЅ node-inclusion-element-­ЮЋјрхЅ HрхЅ xрхЅ
  is-empty-eq-root-node-inclusion-element-­ЮЋјрхЅ =
    is-empty-eq-root-node-inclusion-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
```

#### The underlying directed tree of an element of a W-type

```agda
  directed-tree-element-­ЮЋјрхЅ :
    ­ЮЋјрхЅ AрхЅ BрхЅ Рєњ Directed-TreeрхЅ (l1рхЅ Ріћ l2рхЅ) (l1рхЅ Ріћ l2рхЅ)
  directed-tree-element-­ЮЋјрхЅ =
    directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  has-unique-predecessor-node-inclusion-element-­ЮЋјрхЅ :
    {vрхЅ wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} (HрхЅ : vрхЅ Рѕѕ-­ЮЋјрхЅ wрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ vрхЅ) Рєњ
    is-contrрхЅ
      ( ╬БрхЅ ( node-element-­ЮЋјрхЅ wрхЅ)
          ( edge-element-­ЮЋјрхЅ wрхЅ (node-inclusion-element-­ЮЋјрхЅ HрхЅ xрхЅ)))
  has-unique-predecessor-node-inclusion-element-­ЮЋјрхЅ =
    has-unique-predecessor-node-inclusion-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  has-unique-predecessor-graph-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    is-contrрхЅ
      ((root-­ЮЋјрхЅ wрхЅ №╝ЮрхЅ xрхЅ) +рхЅ ╬БрхЅ (node-element-­ЮЋјрхЅ wрхЅ) (edge-element-­ЮЋјрхЅ wрхЅ xрхЅ))
  has-unique-predecessor-graph-element-­ЮЋјрхЅ =
    has-unique-predecessor-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  walk-to-root-graph-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    walk-Directed-GraphрхЅ (graph-element-­ЮЋјрхЅ wрхЅ) xрхЅ (root-­ЮЋјрхЅ wрхЅ)
  walk-to-root-graph-element-­ЮЋјрхЅ =
    walk-to-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  unique-walk-to-root-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) Рєњ is-tree-Directed-Graph'рхЅ (graph-element-­ЮЋјрхЅ wрхЅ) (root-­ЮЋјрхЅ wрхЅ)
  unique-walk-to-root-element-­ЮЋјрхЅ =
    unique-walk-to-root-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
```

#### The underlying directed tree of an element of a W-type is enriched

```agda
module _
  {l1рхЅ l2рхЅ : Level} {AрхЅ : UUрхЅ l1рхЅ} {BрхЅ : AрхЅ Рєњ UUрхЅ l2рхЅ}
  where

  shape-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) Рєњ node-element-­ЮЋјрхЅ wрхЅ Рєњ AрхЅ
  shape-element-­ЮЋјрхЅ =
    shape-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  map-enrichment-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    BрхЅ (shape-element-­ЮЋјрхЅ wрхЅ xрхЅ) Рєњ
    ╬БрхЅ (node-element-­ЮЋјрхЅ wрхЅ) (╬╗ yрхЅ Рєњ edge-element-­ЮЋјрхЅ wрхЅ yрхЅ xрхЅ)
  map-enrichment-element-­ЮЋјрхЅ =
    map-enrichment-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  map-inv-enrichment-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    ╬БрхЅ (node-element-­ЮЋјрхЅ wрхЅ) (╬╗ yрхЅ Рєњ edge-element-­ЮЋјрхЅ wрхЅ yрхЅ xрхЅ) Рєњ
    BрхЅ (shape-element-­ЮЋјрхЅ wрхЅ xрхЅ)
  map-inv-enrichment-element-­ЮЋјрхЅ =
    map-inv-enrichment-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-section-map-inv-enrichment-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    ( map-enrichment-element-­ЮЋјрхЅ wрхЅ xрхЅ РѕўрхЅ
      map-inv-enrichment-element-­ЮЋјрхЅ wрхЅ xрхЅ) ~рхЅ idрхЅ
  is-section-map-inv-enrichment-element-­ЮЋјрхЅ =
    is-section-map-inv-enrichment-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-retraction-map-inv-enrichment-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    ( map-inv-enrichment-element-­ЮЋјрхЅ wрхЅ xрхЅ РѕўрхЅ
      map-enrichment-element-­ЮЋјрхЅ wрхЅ xрхЅ) ~рхЅ idрхЅ
  is-retraction-map-inv-enrichment-element-­ЮЋјрхЅ =
    is-retraction-map-inv-enrichment-directed-tree-element-coalgebraрхЅ
      ( ­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-equiv-map-enrichment-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    is-equivрхЅ (map-enrichment-element-­ЮЋјрхЅ wрхЅ xрхЅ)
  is-equiv-map-enrichment-element-­ЮЋјрхЅ =
    is-equiv-map-enrichment-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  enrichment-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    BрхЅ (shape-element-­ЮЋјрхЅ wрхЅ xрхЅ) РЅЃрхЅ
    ╬БрхЅ (node-element-­ЮЋјрхЅ wрхЅ) (╬╗ yрхЅ Рєњ edge-element-­ЮЋјрхЅ wрхЅ yрхЅ xрхЅ)
  enrichment-element-­ЮЋјрхЅ =
    enrichment-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
```

## Properties

### Characterization of equality of the type of nodes of the underlying graph of an element of `­ЮЋј A B`

```agda
module _
  {l1рхЅ l2рхЅ : Level} {AрхЅ : UUрхЅ l1рхЅ} {BрхЅ : AрхЅ Рєњ UUрхЅ l2рхЅ}
  where

  Eq-node-element-­ЮЋјрхЅ : (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ UUрхЅ (l1рхЅ Ріћ l2рхЅ)
  Eq-node-element-­ЮЋјрхЅ = Eq-node-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  root-refl-Eq-node-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) Рєњ Eq-node-element-­ЮЋјрхЅ wрхЅ (root-­ЮЋјрхЅ wрхЅ) (root-­ЮЋјрхЅ wрхЅ)
  root-refl-Eq-node-element-­ЮЋјрхЅ wрхЅ = root-refl-Eq-node-element-coalgebraрхЅ

  node-inclusion-Eq-node-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) {uрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} (HрхЅ : uрхЅ Рѕѕ-­ЮЋјрхЅ wрхЅ) {xрхЅ yрхЅ : node-element-­ЮЋјрхЅ uрхЅ} Рєњ
    Eq-node-element-­ЮЋјрхЅ uрхЅ xрхЅ yрхЅ Рєњ
    Eq-node-element-­ЮЋјрхЅ wрхЅ
      ( node-inclusion-element-­ЮЋјрхЅ HрхЅ xрхЅ)
      ( node-inclusion-element-­ЮЋјрхЅ HрхЅ yрхЅ)
  node-inclusion-Eq-node-element-­ЮЋјрхЅ wрхЅ =
    node-inclusion-Eq-node-element-coalgebraрхЅ

  refl-Eq-node-element-­ЮЋјрхЅ :
    {wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ} (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    Eq-node-element-­ЮЋјрхЅ wрхЅ xрхЅ xрхЅ
  refl-Eq-node-element-­ЮЋјрхЅ = refl-Eq-node-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-torsorial-Eq-node-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    is-torsorialрхЅ (Eq-node-element-­ЮЋјрхЅ wрхЅ xрхЅ)
  is-torsorial-Eq-node-element-­ЮЋјрхЅ =
    is-torsorial-Eq-node-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  Eq-eq-node-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) {xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ} Рєњ
    xрхЅ №╝ЮрхЅ yрхЅ Рєњ Eq-node-element-­ЮЋјрхЅ wрхЅ xрхЅ yрхЅ
  Eq-eq-node-element-­ЮЋјрхЅ = Eq-eq-node-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  is-equiv-Eq-eq-node-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    is-equivрхЅ (Eq-eq-node-element-­ЮЋјрхЅ wрхЅ {xрхЅ} {yрхЅ})
  is-equiv-Eq-eq-node-element-­ЮЋјрхЅ =
    is-equiv-Eq-eq-node-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  extensionality-node-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    (xрхЅ №╝ЮрхЅ yрхЅ) РЅЃрхЅ Eq-node-element-­ЮЋјрхЅ wрхЅ xрхЅ yрхЅ
  extensionality-node-element-­ЮЋјрхЅ =
    extensionality-node-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)

  eq-Eq-node-element-­ЮЋјрхЅ :
    (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ) (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    Eq-node-element-­ЮЋјрхЅ wрхЅ xрхЅ yрхЅ Рєњ xрхЅ №╝ЮрхЅ yрхЅ
  eq-Eq-node-element-­ЮЋјрхЅ =
    eq-Eq-node-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
```

### The underlying tree of `tree-­ЮЋј a ╬▒` is the combinator tree of the underlying trees of `╬▒ b` indexed by `b : B a`

```agda
module _
  {l1рхЅ l2рхЅ : Level} {AрхЅ : UUрхЅ l1рхЅ} {BрхЅ : AрхЅ Рєњ UUрхЅ l2рхЅ} (wрхЅ : ­ЮЋјрхЅ AрхЅ BрхЅ)
  where

  node-compute-directed-tree-element-­ЮЋјрхЅ :
    node-element-­ЮЋјрхЅ wрхЅ Рєњ
    node-combinator-Directed-TreeрхЅ
      ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ))
  node-compute-directed-tree-element-­ЮЋјрхЅ =
    node-compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  map-inv-node-compute-directed-tree-element-­ЮЋјрхЅ :
    node-combinator-Directed-TreeрхЅ
      ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ)) Рєњ
    node-element-­ЮЋјрхЅ wрхЅ
  map-inv-node-compute-directed-tree-element-­ЮЋјрхЅ =
    map-inv-node-compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  is-section-map-inv-node-compute-directed-tree-element-­ЮЋјрхЅ :
    ( node-compute-directed-tree-element-­ЮЋјрхЅ РѕўрхЅ
      map-inv-node-compute-directed-tree-element-­ЮЋјрхЅ) ~рхЅ idрхЅ
  is-section-map-inv-node-compute-directed-tree-element-­ЮЋјрхЅ =
    is-section-map-inv-node-compute-directed-tree-element-coalgebraрхЅ
      ( ­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
      ( wрхЅ)

  is-retraction-map-inv-node-compute-directed-tree-element-­ЮЋјрхЅ :
    ( map-inv-node-compute-directed-tree-element-­ЮЋјрхЅ РѕўрхЅ
      node-compute-directed-tree-element-­ЮЋјрхЅ) ~рхЅ idрхЅ
  is-retraction-map-inv-node-compute-directed-tree-element-­ЮЋјрхЅ =
    is-retraction-map-inv-node-compute-directed-tree-element-coalgebraрхЅ
      ( ­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
      ( wрхЅ)

  is-equiv-node-compute-directed-tree-element-­ЮЋјрхЅ :
    is-equivрхЅ node-compute-directed-tree-element-­ЮЋјрхЅ
  is-equiv-node-compute-directed-tree-element-­ЮЋјрхЅ =
    is-equiv-node-compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  equiv-node-compute-directed-tree-element-­ЮЋјрхЅ :
    node-element-­ЮЋјрхЅ wрхЅ РЅЃрхЅ
    node-combinator-Directed-TreeрхЅ
      ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ))
  equiv-node-compute-directed-tree-element-­ЮЋјрхЅ =
    equiv-node-compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  edge-compute-directed-tree-element-­ЮЋјрхЅ :
    (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    edge-element-­ЮЋјрхЅ wрхЅ xрхЅ yрхЅ Рєњ
    edge-combinator-Directed-TreeрхЅ
      ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ))
      ( node-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ)
      ( node-compute-directed-tree-element-­ЮЋјрхЅ yрхЅ)
  edge-compute-directed-tree-element-­ЮЋјрхЅ =
    edge-compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  map-inv-edge-compute-directed-tree-element-­ЮЋјрхЅ :
    ( xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    edge-combinator-Directed-TreeрхЅ
      ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ))
      ( node-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ)
      ( node-compute-directed-tree-element-­ЮЋјрхЅ yрхЅ) Рєњ
    edge-element-­ЮЋјрхЅ wрхЅ xрхЅ yрхЅ
  map-inv-edge-compute-directed-tree-element-­ЮЋјрхЅ =
    map-inv-edge-compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  is-section-map-inv-edge-compute-directed-tree-element-­ЮЋјрхЅ :
    (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    ( eрхЅ :
      edge-combinator-Directed-TreeрхЅ
        ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ))
        ( node-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ)
        ( node-compute-directed-tree-element-­ЮЋјрхЅ yрхЅ)) Рєњ
    edge-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ yрхЅ
      ( map-inv-edge-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ yрхЅ eрхЅ) №╝ЮрхЅ eрхЅ
  is-section-map-inv-edge-compute-directed-tree-element-­ЮЋјрхЅ =
    is-section-map-inv-edge-compute-directed-tree-element-coalgebraрхЅ
      ( ­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
      ( wрхЅ)

  is-retraction-map-inv-edge-compute-directed-tree-element-­ЮЋјрхЅ :
    (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) (eрхЅ : edge-element-­ЮЋјрхЅ wрхЅ xрхЅ yрхЅ) Рєњ
    map-inv-edge-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ yрхЅ
      ( edge-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ yрхЅ eрхЅ) №╝ЮрхЅ eрхЅ
  is-retraction-map-inv-edge-compute-directed-tree-element-­ЮЋјрхЅ =
    is-retraction-map-inv-edge-compute-directed-tree-element-coalgebraрхЅ
      ( ­ЮЋј-CoalgрхЅ AрхЅ BрхЅ)
      ( wрхЅ)

  is-equiv-edge-compute-directed-tree-element-­ЮЋјрхЅ :
    (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    is-equivрхЅ (edge-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ yрхЅ)
  is-equiv-edge-compute-directed-tree-element-­ЮЋјрхЅ =
    is-equiv-edge-compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  equiv-edge-compute-directed-tree-element-­ЮЋјрхЅ :
    (xрхЅ yрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    edge-element-­ЮЋјрхЅ wрхЅ xрхЅ yрхЅ РЅЃрхЅ
    edge-combinator-Directed-TreeрхЅ
      ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ))
      ( node-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ)
      ( node-compute-directed-tree-element-­ЮЋјрхЅ yрхЅ)
  equiv-edge-compute-directed-tree-element-­ЮЋјрхЅ =
    equiv-edge-compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  compute-directed-tree-element-­ЮЋјрхЅ :
    equiv-Directed-TreeрхЅ
      ( directed-tree-element-­ЮЋјрхЅ wрхЅ)
      ( combinator-Directed-TreeрхЅ
        ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ)))
  compute-directed-tree-element-­ЮЋјрхЅ =
    compute-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  shape-compute-enriched-directed-tree-element-­ЮЋјрхЅ :
    shape-element-­ЮЋјрхЅ wрхЅ ~рхЅ
    ( ( shape-combinator-Enriched-Directed-TreeрхЅ AрхЅ BрхЅ
        ( ╬╗ bрхЅ Рєњ enriched-directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ))) РѕўрхЅ
      ( node-compute-directed-tree-element-­ЮЋјрхЅ))
  shape-compute-enriched-directed-tree-element-­ЮЋјрхЅ =
    shape-compute-enriched-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  enrichment-compute-enriched-directed-tree-element-­ЮЋјрхЅ :
    (xрхЅ : node-element-­ЮЋјрхЅ wрхЅ) Рєњ
    htpy-equivрхЅ
      ( ( equiv-direct-predecessor-equiv-Directed-TreeрхЅ
          ( directed-tree-element-­ЮЋјрхЅ wрхЅ)
          ( combinator-Directed-TreeрхЅ
            ( ╬╗ bрхЅ Рєњ directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ)))
          ( compute-directed-tree-element-­ЮЋјрхЅ)
          ( xрхЅ)) РѕўeрхЅ
        ( enrichment-element-­ЮЋјрхЅ wрхЅ xрхЅ))
      ( ( enrichment-combinator-Enriched-Directed-TreeрхЅ AрхЅ BрхЅ
          ( ╬╗ bрхЅ Рєњ enriched-directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ))
          ( node-compute-directed-tree-element-­ЮЋјрхЅ xрхЅ)) РѕўeрхЅ
        ( equiv-trрхЅ BрхЅ
          ( shape-compute-enriched-directed-tree-element-­ЮЋјрхЅ xрхЅ)))
  enrichment-compute-enriched-directed-tree-element-­ЮЋјрхЅ =
    enrichment-compute-enriched-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ

  compute-enriched-directed-tree-element-­ЮЋјрхЅ :
    equiv-Enriched-Directed-TreeрхЅ AрхЅ BрхЅ
      ( enriched-directed-tree-element-­ЮЋјрхЅ wрхЅ)
      ( combinator-Enriched-Directed-TreeрхЅ AрхЅ BрхЅ
        ( ╬╗ bрхЅ Рєњ enriched-directed-tree-element-­ЮЋјрхЅ (component-­ЮЋјрхЅ wрхЅ bрхЅ)))
  compute-enriched-directed-tree-element-­ЮЋјрхЅ =
    compute-enriched-directed-tree-element-coalgebraрхЅ (­ЮЋј-CoalgрхЅ AрхЅ BрхЅ) wрхЅ
```