# Cocones under spans

```agda
module synthetic-homotopy-theory.cocones-under-spans·µâ where
```

<details><summary>Imports</summary>

```agda
open import foundation.action-on-identifications-functions·µâ
open import foundation.dependent-pair-types·µâ
open import foundation.function-extensionality·µâ
open import foundation.fundamental-theorem-of-identity-types·µâ
open import foundation.homotopies·µâ
open import foundation.homotopy-induction·µâ
open import foundation.morphisms-arrows·µâ
open import foundation.span-diagrams·µâ
open import foundation.structure-identity-principle·µâ
open import foundation.universe-levels·µâ
open import foundation.whiskering-homotopies-composition·µâ

open import foundation-core.commuting-squares-of-maps·µâ
open import foundation-core.contractible-types·µâ
open import foundation-core.equality-dependent-pair-types·µâ
open import foundation-core.equivalences·µâ
open import foundation-core.function-types·µâ
open import foundation-core.functoriality-dependent-pair-types·µâ
open import foundation-core.identity-types·µâ
open import foundation-core.torsorial-type-families·µâ
```

</details>

## Idea

A·µâ **cocone·µâ under·µâ a·µâ [span](foundation.spans.md)**·µâ `A·µâ <-f-·µâ S·µâ -g->·µâ B`·µâ with codomain·µâ
`X`·µâ consists·µâ of·µâ two·µâ maps·µâ `i·µâ : A·µâ ‚Üí X`·µâ and·µâ `j·µâ : B·µâ ‚Üí X`·µâ equipped·µâ with a·µâ
[homotopy](foundation.homotopies.md·µâ) witnessing·µâ that·µâ the·µâ square·µâ

```text
        g·µâ
    S·µâ ----->·µâ B·µâ
    |        |
  f·µâ |        | j·µâ
    ‚à®·µâ        ‚à®·µâ
    A·µâ ----->·µâ X·µâ
        i·µâ
```

[commutes](foundation.commuting-squares-of-maps.md).·µâ

## Definitions

### Cocones

```agda
cocone·µâ :
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) ‚Üí UU·µâ l4·µâ ‚Üí UU·µâ (l1·µâ ‚äî l2·µâ ‚äî l3·µâ ‚äî l4·µâ)
cocone·µâ {A·µâ = A·µâ} {B·µâ = B·µâ} f·µâ g·µâ X·µâ =
  Œ£·µâ (A·µâ ‚Üí X·µâ) (Œª i·µâ ‚Üí Œ£·µâ (B·µâ ‚Üí X·µâ) (Œª j·µâ ‚Üí coherence-square-maps·µâ g·µâ f·µâ j·µâ i·µâ))

cocone-span-diagram·µâ :
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} ‚Üí
  span-diagram·µâ l1·µâ l2·µâ l3·µâ ‚Üí UU·µâ l4·µâ ‚Üí
  UU·µâ (l1·µâ ‚äî l2·µâ ‚äî l3·µâ ‚äî l4·µâ)
cocone-span-diagram·µâ ùíÆ·µâ X·µâ =
  cocone·µâ (left-map-span-diagram·µâ ùíÆ·µâ) (right-map-span-diagram·µâ ùíÆ·µâ) X·µâ

module _
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ} {X·µâ : UU·µâ l4·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) (c·µâ : cocone·µâ f·µâ g·µâ X·µâ)
  where

  horizontal-map-cocone·µâ : A·µâ ‚Üí X·µâ
  horizontal-map-cocone·µâ = pr1·µâ c·µâ

  vertical-map-cocone·µâ : B·µâ ‚Üí X·µâ
  vertical-map-cocone·µâ = pr1·µâ (pr2·µâ c·µâ)

  coherence-square-cocone·µâ :
    coherence-square-maps·µâ g·µâ f·µâ vertical-map-cocone·µâ horizontal-map-cocone·µâ
  coherence-square-cocone·µâ = pr2·µâ (pr2·µâ c·µâ)
```

### Homotopies of cocones

```agda
module _
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) {X·µâ : UU·µâ l4·µâ}
  where

  statement-coherence-htpy-cocone·µâ :
    (c·µâ c'·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí
    (K·µâ : horizontal-map-cocone·µâ f·µâ g·µâ c·µâ ~·µâ horizontal-map-cocone·µâ f·µâ g·µâ c'·µâ)
    (L·µâ : vertical-map-cocone·µâ f·µâ g·µâ c·µâ ~·µâ vertical-map-cocone·µâ f·µâ g·µâ c'·µâ) ‚Üí
    UU·µâ (l1·µâ ‚äî l4·µâ)
  statement-coherence-htpy-cocone·µâ c·µâ c'·µâ K·µâ L·µâ =
    (coherence-square-cocone·µâ f·µâ g·µâ c·µâ ‚àôh·µâ (L·µâ ¬∑r·µâ g·µâ)) ~·µâ
    ((K·µâ ¬∑r·µâ f·µâ) ‚àôh·µâ coherence-square-cocone·µâ f·µâ g·µâ c'·µâ)

  htpy-cocone·µâ : (c·µâ c'·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí UU·µâ (l1·µâ ‚äî l2·µâ ‚äî l3·µâ ‚äî l4·µâ)
  htpy-cocone·µâ c·µâ c'·µâ =
    Œ£·µâ ( horizontal-map-cocone·µâ f·µâ g·µâ c·µâ ~·µâ horizontal-map-cocone·µâ f·µâ g·µâ c'·µâ)
      ( Œª K·µâ ‚Üí
        Œ£·µâ ( vertical-map-cocone·µâ f·µâ g·µâ c·µâ ~·µâ vertical-map-cocone·µâ f·µâ g·µâ c'·µâ)
          ( statement-coherence-htpy-cocone·µâ c·µâ c'·µâ K·µâ))

  module _
    (c·µâ c'·µâ : cocone·µâ f·µâ g·µâ X·µâ) (H·µâ : htpy-cocone·µâ c·µâ c'·µâ)
    where

    horizontal-htpy-cocone·µâ :
      horizontal-map-cocone·µâ f·µâ g·µâ c·µâ ~·µâ horizontal-map-cocone·µâ f·µâ g·µâ c'·µâ
    horizontal-htpy-cocone·µâ = pr1·µâ H·µâ

    vertical-htpy-cocone·µâ :
      vertical-map-cocone·µâ f·µâ g·µâ c·µâ ~·µâ vertical-map-cocone·µâ f·µâ g·µâ c'·µâ
    vertical-htpy-cocone·µâ = pr1·µâ (pr2·µâ H·µâ)

    coherence-htpy-cocone·µâ :
      statement-coherence-htpy-cocone·µâ c·µâ c'·µâ
        ( horizontal-htpy-cocone·µâ)
        ( vertical-htpy-cocone·µâ)
    coherence-htpy-cocone·µâ = pr2·µâ (pr2·µâ H·µâ)

  refl-htpy-cocone·µâ :
    (c·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí htpy-cocone·µâ c·µâ c·µâ
  pr1·µâ (refl-htpy-cocone·µâ (i·µâ ,·µâ j·µâ ,·µâ H·µâ)) = refl-htpy·µâ
  pr1·µâ (pr2·µâ (refl-htpy-cocone·µâ (i·µâ ,·µâ j·µâ ,·µâ H·µâ))) = refl-htpy·µâ
  pr2·µâ (pr2·µâ (refl-htpy-cocone·µâ (i·µâ ,·µâ j·µâ ,·µâ H·µâ))) = right-unit-htpy·µâ

  htpy-eq-cocone·µâ :
    (c·µâ c'·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí c·µâ Ôºù·µâ c'·µâ ‚Üí htpy-cocone·µâ c·µâ c'·µâ
  htpy-eq-cocone·µâ c·µâ .c·µâ refl·µâ = refl-htpy-cocone·µâ c·µâ

  module _
    (c·µâ c'·µâ : cocone·µâ f·µâ g·µâ X·µâ)
    (p·µâ : c·µâ Ôºù·µâ c'·µâ)
    where

    horizontal-htpy-eq-cocone·µâ :
      horizontal-map-cocone·µâ f·µâ g·µâ c·µâ ~·µâ
      horizontal-map-cocone·µâ f·µâ g·µâ c'·µâ
    horizontal-htpy-eq-cocone·µâ =
      horizontal-htpy-cocone·µâ c·µâ c'·µâ (htpy-eq-cocone·µâ c·µâ c'·µâ p·µâ)

    vertical-htpy-eq-cocone·µâ :
      vertical-map-cocone·µâ f·µâ g·µâ c·µâ ~·µâ
      vertical-map-cocone·µâ f·µâ g·µâ c'·µâ
    vertical-htpy-eq-cocone·µâ =
      vertical-htpy-cocone·µâ c·µâ c'·µâ (htpy-eq-cocone·µâ c·µâ c'·µâ p·µâ)

    coherence-square-htpy-eq-cocone·µâ :
      statement-coherence-htpy-cocone·µâ c·µâ c'·µâ
        ( horizontal-htpy-eq-cocone·µâ)
        ( vertical-htpy-eq-cocone·µâ)
    coherence-square-htpy-eq-cocone·µâ =
      coherence-htpy-cocone·µâ c·µâ c'·µâ (htpy-eq-cocone·µâ c·µâ c'·µâ p·µâ)

  is-torsorial-htpy-cocone·µâ :
    (c·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí is-torsorial·µâ (htpy-cocone·µâ c·µâ)
  is-torsorial-htpy-cocone·µâ c·µâ =
    is-torsorial-Eq-structure·µâ
      ( is-torsorial-htpy·µâ (horizontal-map-cocone·µâ f·µâ g·µâ c·µâ))
      ( horizontal-map-cocone·µâ f·µâ g·µâ c·µâ ,·µâ refl-htpy·µâ)
      ( is-torsorial-Eq-structure·µâ
        ( is-torsorial-htpy·µâ (vertical-map-cocone·µâ f·µâ g·µâ c·µâ))
        ( vertical-map-cocone·µâ f·µâ g·µâ c·µâ ,·µâ refl-htpy·µâ)
        ( is-contr-is-equiv'·µâ
          ( Œ£·µâ ( horizontal-map-cocone·µâ f·µâ g·µâ c·µâ ‚àò·µâ f·µâ ~·µâ vertical-map-cocone·µâ f·µâ g·µâ c·µâ ‚àò·µâ g·µâ)
              ( Œª H'·µâ ‚Üí coherence-square-cocone·µâ f·µâ g·µâ c·µâ ~·µâ H'·µâ))
          ( tot·µâ (Œª H'·µâ M·µâ ‚Üí right-unit-htpy·µâ ‚àôh·µâ M·µâ))
          ( is-equiv-tot-is-fiberwise-equiv·µâ (Œª H'·µâ ‚Üí is-equiv-concat-htpy·µâ _ _))
          ( is-torsorial-htpy·µâ (coherence-square-cocone·µâ f·µâ g·µâ c·µâ))))

  is-equiv-htpy-eq-cocone·µâ :
    (c·µâ c'·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí is-equiv·µâ (htpy-eq-cocone·µâ c·µâ c'·µâ)
  is-equiv-htpy-eq-cocone·µâ c·µâ =
    fundamental-theorem-id·µâ
      ( is-torsorial-htpy-cocone·µâ c·µâ)
      ( htpy-eq-cocone·µâ c·µâ)

  extensionality-cocone·µâ :
    (c·µâ c'·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí (c·µâ Ôºù·µâ c'·µâ) ‚âÉ·µâ htpy-cocone·µâ c·µâ c'·µâ
  pr1·µâ (extensionality-cocone·µâ c·µâ c'·µâ) = htpy-eq-cocone·µâ c·µâ c'·µâ
  pr2·µâ (extensionality-cocone·µâ c·µâ c'·µâ) = is-equiv-htpy-eq-cocone·µâ c·µâ c'·µâ

  eq-htpy-cocone·µâ :
    (c·µâ c'·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí htpy-cocone·µâ c·µâ c'·µâ ‚Üí c·µâ Ôºù·µâ c'·µâ
  eq-htpy-cocone·µâ c·µâ c'·µâ = map-inv-is-equiv·µâ (is-equiv-htpy-eq-cocone·µâ c·µâ c'·µâ)
```

### Postcomposing cocones under spans with maps

```agda
cocone-map·µâ :
  {l1·µâ l2·µâ l3·µâ l4·µâ l5·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) {X·µâ : UU·µâ l4·µâ} {Y·µâ : UU·µâ l5·µâ} ‚Üí
  cocone·µâ f·µâ g·µâ X·µâ ‚Üí (X·µâ ‚Üí Y·µâ) ‚Üí cocone·µâ f·µâ g·µâ Y·µâ
pr1·µâ (cocone-map·µâ f·µâ g·µâ c·µâ h·µâ) = h·µâ ‚àò·µâ horizontal-map-cocone·µâ f·µâ g·µâ c·µâ
pr1·µâ (pr2·µâ (cocone-map·µâ f·µâ g·µâ c·µâ h·µâ)) = h·µâ ‚àò·µâ vertical-map-cocone·µâ f·µâ g·µâ c·µâ
pr2·µâ (pr2·µâ (cocone-map·µâ f·µâ g·µâ c·µâ h·µâ)) = h·µâ ¬∑l·µâ coherence-square-cocone·µâ f·µâ g·µâ c·µâ

cocone-map-span-diagram·µâ :
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {ùíÆ·µâ : span-diagram·µâ l1·µâ l2·µâ l3·µâ}
  {X·µâ : UU·µâ l4·µâ} (c·µâ : cocone-span-diagram·µâ ùíÆ·µâ X·µâ) ‚Üí
  {l5·µâ : Level} {Y·µâ : UU·µâ l5·µâ} ‚Üí
  (X·µâ ‚Üí Y·µâ) ‚Üí cocone-span-diagram·µâ ùíÆ·µâ Y·µâ
cocone-map-span-diagram·µâ {ùíÆ·µâ = ùíÆ·µâ} c·µâ =
  cocone-map·µâ (left-map-span-diagram·µâ ùíÆ·µâ) (right-map-span-diagram·µâ ùíÆ·µâ) c·µâ

cocone-map-id·µâ :
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) {X·µâ : UU·µâ l4·µâ} (c·µâ : cocone·µâ f·µâ g·µâ X·µâ) ‚Üí
  Id·µâ (cocone-map·µâ f·µâ g·µâ c·µâ id·µâ) c·µâ
cocone-map-id·µâ f·µâ g·µâ c·µâ =
  eq-pair-eq-fiber·µâ
    ( eq-pair-eq-fiber·µâ (eq-htpy·µâ (ap-id·µâ ‚àò·µâ coherence-square-cocone·µâ f·µâ g·µâ c·µâ)))

cocone-map-comp·µâ :
  {l1·µâ l2·µâ l3·µâ l4·µâ l5·µâ l6·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) {X·µâ : UU·µâ l4·µâ} (c·µâ : cocone·µâ f·µâ g·µâ X·µâ)
  {Y·µâ : UU·µâ l5·µâ} (h·µâ : X·µâ ‚Üí Y·µâ) {Z·µâ : UU·µâ l6·µâ} (k·µâ : Y·µâ ‚Üí Z·µâ) ‚Üí
  cocone-map·µâ f·µâ g·µâ c·µâ (k·µâ ‚àò·µâ h·µâ) Ôºù·µâ cocone-map·µâ f·µâ g·µâ (cocone-map·µâ f·µâ g·µâ c·µâ h·µâ) k·µâ
cocone-map-comp·µâ f·µâ g·µâ (i·µâ ,·µâ j·µâ ,·µâ H·µâ) h·µâ k·µâ =
  eq-pair-eq-fiber·µâ (eq-pair-eq-fiber·µâ (eq-htpy·µâ (ap-comp·µâ k·µâ h·µâ ‚àò·µâ H·µâ)))
```

### Horizontal composition of cocones

```text
        i·µâ       k·µâ
    A·µâ ---->·µâ B·µâ ---->·µâ C·µâ
    |       |       |
  f·µâ |       |       |
    ‚à®·µâ       ‚à®·µâ       ‚à®·µâ
    X·µâ ---->·µâ Y·µâ ---->·µâ Z·µâ
```

```agda
cocone-comp-horizontal·µâ :
  { l1·µâ l2·µâ l3·µâ l4·µâ l5·µâ l6·µâ : Level}
  { A·µâ : UU·µâ l1·µâ} {B·µâ : UU·µâ l2·µâ} {C·µâ : UU·µâ l3·µâ} {X·µâ : UU·µâ l4·µâ} {Y·µâ : UU·µâ l5·µâ} {Z·µâ : UU·µâ l6·µâ}
  ( f·µâ : A·µâ ‚Üí X·µâ) (i·µâ : A·µâ ‚Üí B·µâ) (k·µâ : B·µâ ‚Üí C·µâ) ( c·µâ : cocone·µâ f·µâ i·µâ Y·µâ) ‚Üí
  cocone·µâ (vertical-map-cocone·µâ f·µâ i·µâ c·µâ) k·µâ Z·µâ ‚Üí cocone·µâ f·µâ (k·µâ ‚àò·µâ i·µâ) Z·µâ
pr1·µâ (cocone-comp-horizontal·µâ f·µâ i·µâ k·µâ c·µâ d·µâ) =
  ( horizontal-map-cocone·µâ (vertical-map-cocone·µâ f·µâ i·µâ c·µâ) k·µâ d·µâ) ‚àò·µâ
  ( horizontal-map-cocone·µâ f·µâ i·µâ c·µâ)
pr1·µâ (pr2·µâ (cocone-comp-horizontal·µâ f·µâ i·µâ k·µâ c·µâ d·µâ)) =
  vertical-map-cocone·µâ (vertical-map-cocone·µâ f·µâ i·µâ c·µâ) k·µâ d·µâ
pr2·µâ (pr2·µâ (cocone-comp-horizontal·µâ f·µâ i·µâ k·µâ c·µâ d·µâ)) =
  pasting-horizontal-coherence-square-maps·µâ
    ( i·µâ)
    ( k·µâ)
    ( f·µâ)
    ( vertical-map-cocone·µâ f·µâ i·µâ c·µâ)
    ( vertical-map-cocone·µâ (vertical-map-cocone·µâ f·µâ i·µâ c·µâ) k·µâ d·µâ)
    ( horizontal-map-cocone·µâ f·µâ i·µâ c·µâ)
    ( horizontal-map-cocone·µâ (vertical-map-cocone·µâ f·µâ i·µâ c·µâ) k·µâ d·µâ)
    ( coherence-square-cocone·µâ f·µâ i·µâ c·µâ)
    ( coherence-square-cocone·µâ (vertical-map-cocone·µâ f·µâ i·µâ c·µâ) k·µâ d·µâ)
```

A·µâ variation·µâ on·µâ the·µâ above·µâ:

```text
        i·µâ       k·µâ
    A·µâ ---->·µâ B·µâ ---->·µâ C·µâ
    |       |       |
  f·µâ |     g·µâ |       |
    ‚à®·µâ       ‚à®·µâ       ‚à®·µâ
    X·µâ ---->·µâ Y·µâ ---->·µâ Z·µâ
        j·µâ
```

```agda
cocone-comp-horizontal'·µâ :
  { l1·µâ l2·µâ l3·µâ l4·µâ l5·µâ l6·µâ : Level}
  { A·µâ : UU·µâ l1·µâ} {B·µâ : UU·µâ l2·µâ} {C·µâ : UU·µâ l3·µâ} {X·µâ : UU·µâ l4·µâ} {Y·µâ : UU·µâ l5·µâ} {Z·µâ : UU·µâ l6·µâ}
  ( f·µâ : A·µâ ‚Üí X·µâ) (i·µâ : A·µâ ‚Üí B·µâ) (k·µâ : B·µâ ‚Üí C·µâ) (g·µâ : B·µâ ‚Üí Y·µâ) (j·µâ : X·µâ ‚Üí Y·µâ) ‚Üí
  cocone·µâ g·µâ k·µâ Z·µâ ‚Üí coherence-square-maps·µâ i·µâ f·µâ g·µâ j·µâ ‚Üí
  cocone·µâ f·µâ (k·µâ ‚àò·µâ i·µâ) Z·µâ
cocone-comp-horizontal'·µâ f·µâ i·µâ k·µâ g·µâ j·µâ c·µâ coh·µâ =
  cocone-comp-horizontal·µâ f·µâ i·µâ k·µâ (j·µâ ,·µâ g·µâ ,·µâ coh·µâ) c·µâ
```

### Vertical composition of cocones

```text
        i·µâ
    A·µâ ----->·µâ X·µâ
    |        |
  f·µâ |        |
    ‚à®·µâ        ‚à®·µâ
    B·µâ ----->·µâ Y·µâ
    |        |
  k·µâ |        |
    ‚à®·µâ        ‚à®·µâ
    C·µâ ----->·µâ Z·µâ
```

```agda
cocone-comp-vertical·µâ :
  { l1·µâ l2·µâ l3·µâ l4·µâ l5·µâ l6·µâ : Level}
  { A·µâ : UU·µâ l1·µâ} {B·µâ : UU·µâ l2·µâ} {C·µâ : UU·µâ l3·µâ} {X·µâ : UU·µâ l4·µâ} {Y·µâ : UU·µâ l5·µâ} {Z·µâ : UU·µâ l6·µâ}
  ( f·µâ : A·µâ ‚Üí B·µâ) (i·µâ : A·µâ ‚Üí X·µâ) (k·µâ : B·µâ ‚Üí C·µâ) ( c·µâ : cocone·µâ f·µâ i·µâ Y·µâ) ‚Üí
  cocone·µâ k·µâ (horizontal-map-cocone·µâ f·µâ i·µâ c·µâ) Z·µâ ‚Üí cocone·µâ (k·µâ ‚àò·µâ f·µâ) i·µâ Z·µâ
pr1·µâ (cocone-comp-vertical·µâ f·µâ i·µâ k·µâ c·µâ d·µâ) =
  horizontal-map-cocone·µâ k·µâ (horizontal-map-cocone·µâ f·µâ i·µâ c·µâ) d·µâ
pr1·µâ (pr2·µâ (cocone-comp-vertical·µâ f·µâ i·µâ k·µâ c·µâ d·µâ)) =
  vertical-map-cocone·µâ k·µâ (horizontal-map-cocone·µâ f·µâ i·µâ c·µâ) d·µâ ‚àò·µâ
  vertical-map-cocone·µâ f·µâ i·µâ c·µâ
pr2·µâ (pr2·µâ (cocone-comp-vertical·µâ f·µâ i·µâ k·µâ c·µâ d·µâ)) =
  pasting-vertical-coherence-square-maps·µâ
    ( i·µâ)
    ( f·µâ)
    ( vertical-map-cocone·µâ f·µâ i·µâ c·µâ)
    ( horizontal-map-cocone·µâ f·µâ i·µâ c·µâ)
    ( k·µâ)
    ( vertical-map-cocone·µâ k·µâ (horizontal-map-cocone·µâ f·µâ i·µâ c·µâ) d·µâ)
    ( horizontal-map-cocone·µâ k·µâ (horizontal-map-cocone·µâ f·µâ i·µâ c·µâ) d·µâ)
    ( coherence-square-cocone·µâ f·µâ i·µâ c·µâ)
    ( coherence-square-cocone·µâ k·µâ (horizontal-map-cocone·µâ f·µâ i·µâ c·µâ) d·µâ)
```

A·µâ variation·µâ on·µâ the·µâ above·µâ:

```text
        i·µâ
    A·µâ ----->·µâ X·µâ
    |        |
  f·µâ |        | g·µâ
    ‚à®·µâ   j·µâ    ‚à®·µâ
    B·µâ ----->·µâ Y·µâ
    |        |
  k·µâ |        |
    ‚à®·µâ        ‚à®·µâ
    C·µâ ----->·µâ Z·µâ
```

```agda
cocone-comp-vertical'·µâ :
  { l1·µâ l2·µâ l3·µâ l4·µâ l5·µâ l6·µâ : Level}
  { A·µâ : UU·µâ l1·µâ} {B·µâ : UU·µâ l2·µâ} {C·µâ : UU·µâ l3·µâ} {X·µâ : UU·µâ l4·µâ} {Y·µâ : UU·µâ l5·µâ} {Z·µâ : UU·µâ l6·µâ}
  ( f·µâ : A·µâ ‚Üí B·µâ) (i·µâ : A·µâ ‚Üí X·µâ) (g·µâ : X·µâ ‚Üí Y·µâ) (j·µâ : B·µâ ‚Üí Y·µâ) (k·µâ : B·µâ ‚Üí C·µâ) ‚Üí
  cocone·µâ k·µâ j·µâ Z·µâ ‚Üí coherence-square-maps·µâ i·µâ f·µâ g·µâ j·µâ ‚Üí
  cocone·µâ (k·µâ ‚àò·µâ f·µâ) i·µâ Z·µâ
cocone-comp-vertical'·µâ f·µâ i·µâ g·µâ j·µâ k·µâ c·µâ coh·µâ =
  cocone-comp-vertical·µâ f·µâ i·µâ k·µâ (j·µâ ,·µâ g·µâ ,·µâ coh·µâ) c·µâ
```

Given·µâ a·µâ commutative·µâ diagram·µâ like·µâ this,·µâ

```text
           g'·µâ
       S'·µâ --->·µâ B'·µâ
      /·µâ \·µâ       \·µâ
  f'·µâ /·µâ   \·µâ k·µâ     \·µâ j·µâ
    /·µâ     ‚à®·µâ   g·µâ   ‚à®·µâ
   A'·µâ     S·µâ ---->·µâ B·µâ
     \·µâ    |       |
    i·µâ \·µâ   | f·µâ     |
       \·µâ  ‚à®·µâ       ‚à®·µâ
        >·µâ A·µâ ---->·µâ X·µâ
```

we·µâ can·µâ compose·µâ both·µâ vertically·µâ and·µâ horizontally·µâ to get·µâ the·µâ following·µâ cocone·µâ:

```text
  S'·µâ --->·µâ B'·µâ
  |       |
  |       |
  ‚à®·µâ       ‚à®·µâ
  A'·µâ --->·µâ X·µâ
```

Notice·µâ that·µâ the·µâ triple·µâ `(i,j,k)`·µâ is·µâ really·µâ a·µâ morphism·µâ of·µâ spans.·µâ So·µâ the·µâ resulting·µâ
cocone·µâ arises·µâ as·µâ a·µâ composition·µâ of·µâ the·µâ original·µâ cocone·µâ with this·µâ morphism·µâ of·µâ
spans.·µâ

```agda
comp-cocone-hom-span·µâ :
  { l1·µâ l2·µâ l3·µâ l4·µâ l5·µâ l6·µâ l7·µâ : Level}
  { S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ} {X·µâ : UU·µâ l4·µâ}
  { S'·µâ : UU·µâ l5·µâ} {A'·µâ : UU·µâ l6·µâ} {B'·µâ : UU·µâ l7·µâ}
  ( f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) (f'·µâ : S'·µâ ‚Üí A'·µâ) (g'·µâ : S'·µâ ‚Üí B'·µâ)
  ( i·µâ : A'·µâ ‚Üí A·µâ) (j·µâ : B'·µâ ‚Üí B·µâ) (k·µâ : S'·µâ ‚Üí S·µâ) ‚Üí
  cocone·µâ f·µâ g·µâ X·µâ ‚Üí
  coherence-square-maps·µâ k·µâ f'·µâ f·µâ i·µâ ‚Üí coherence-square-maps·µâ g'·µâ k·µâ j·µâ g·µâ ‚Üí
  cocone·µâ f'·µâ g'·µâ X·µâ
comp-cocone-hom-span·µâ f·µâ g·µâ f'·µâ g'·µâ i·µâ j·µâ k·µâ c·µâ coh-l·µâ coh-r·µâ =
  cocone-comp-vertical·µâ
    ( id·µâ)
    ( g'·µâ)
    ( f'·µâ)
    ( (g·µâ ‚àò·µâ k·µâ ,·µâ j·µâ ,·µâ coh-r·µâ))
    ( cocone-comp-horizontal·µâ f'·µâ k·µâ g·µâ (i·µâ ,·µâ f·µâ ,·µâ coh-l·µâ) c·µâ)
```

### The diagonal cocone on a span of identical maps

```agda
module _
  {l1·µâ l2·µâ l3·µâ : Level} {A·µâ : UU·µâ l1·µâ} {B·µâ : UU·µâ l2·µâ} (f·µâ : A·µâ ‚Üí B·µâ) (X·µâ : UU·µâ l3·µâ)
  where

  diagonal-into-cocone·µâ :
    (B·µâ ‚Üí X·µâ) ‚Üí cocone·µâ f·µâ f·µâ X·µâ
  pr1·µâ (diagonal-into-cocone·µâ g·µâ) = g·µâ
  pr1·µâ (pr2·µâ (diagonal-into-cocone·µâ g·µâ)) = g·µâ
  pr2·µâ (pr2·µâ (diagonal-into-cocone·µâ g·µâ)) = refl-htpy·µâ
```

### Cocones obtained from morphisms of arrows

```agda
module _
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {A·µâ : UU·µâ l1·µâ} {B·µâ : UU·µâ l2·µâ} {X·µâ : UU·µâ l3·µâ} {Y·µâ : UU·µâ l4·µâ}
  (f·µâ : A·µâ ‚Üí B·µâ) (g·µâ : X·µâ ‚Üí Y·µâ) (h·µâ : hom-arrow·µâ f·µâ g·µâ)
  where

  cocone-hom-arrow·µâ : cocone·µâ f·µâ (map-domain-hom-arrow·µâ f·µâ g·µâ h·µâ) Y·µâ
  pr1·µâ cocone-hom-arrow·µâ = map-codomain-hom-arrow·µâ f·µâ g·µâ h·µâ
  pr1·µâ (pr2·µâ cocone-hom-arrow·µâ) = g·µâ
  pr2·µâ (pr2·µâ cocone-hom-arrow·µâ) = coh-hom-arrow·µâ f·µâ g·µâ h·µâ
```

### The swapping function on cocones over spans

```agda
module _
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) (X·µâ : UU·µâ l4·µâ)
  where

  swap-cocone·µâ : cocone·µâ f·µâ g·µâ X·µâ ‚Üí cocone·µâ g·µâ f·µâ X·µâ
  pr1·µâ (swap-cocone·µâ c·µâ) = vertical-map-cocone·µâ f·µâ g·µâ c·µâ
  pr1·µâ (pr2·µâ (swap-cocone·µâ c·µâ)) = horizontal-map-cocone·µâ f·µâ g·µâ c·µâ
  pr2·µâ (pr2·µâ (swap-cocone·µâ c·µâ)) = inv-htpy·µâ (coherence-square-cocone·µâ f·µâ g·µâ c·µâ)

module _
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) (X·µâ : UU·µâ l4·µâ)
  where

  is-involution-swap-cocone·µâ : swap-cocone·µâ g·µâ f·µâ X·µâ ‚àò·µâ swap-cocone·µâ f·µâ g·µâ X·µâ ~·µâ id·µâ
  is-involution-swap-cocone·µâ c·µâ =
    eq-htpy-cocone·µâ f·µâ g·µâ
      ( swap-cocone·µâ g·µâ f·µâ X·µâ (swap-cocone·µâ f·µâ g·µâ X·µâ c·µâ))
      ( c·µâ)
      ( ( refl-htpy·µâ) ,·µâ
        ( refl-htpy·µâ) ,·µâ
        ( Œª s·µâ ‚Üí
          concat·µâ
            ( right-unit·µâ)
            ( coherence-square-cocone·µâ f·µâ g·µâ c·µâ s·µâ)
            ( inv-inv·µâ (coherence-square-cocone·µâ f·µâ g·µâ c·µâ s·µâ))))

module _
  {l1·µâ l2·µâ l3·µâ l4·µâ : Level} {S·µâ : UU·µâ l1·µâ} {A·µâ : UU·µâ l2·µâ} {B·µâ : UU·µâ l3·µâ}
  (f·µâ : S·µâ ‚Üí A·µâ) (g·µâ : S·µâ ‚Üí B·µâ) (X·µâ : UU·µâ l4·µâ)
  where

  is-equiv-swap-cocone·µâ : is-equiv·µâ (swap-cocone·µâ f·µâ g·µâ X·µâ)
  is-equiv-swap-cocone·µâ =
    is-equiv-is-invertible·µâ
      ( swap-cocone·µâ g·µâ f·µâ X·µâ)
      ( is-involution-swap-cocone·µâ g·µâ f·µâ X·µâ)
      ( is-involution-swap-cocone·µâ f·µâ g·µâ X·µâ)

  equiv-swap-cocone·µâ : cocone·µâ f·µâ g·µâ X·µâ ‚âÉ·µâ cocone·µâ g·µâ f·µâ X·µâ
  pr1·µâ equiv-swap-cocone·µâ = swap-cocone·µâ f·µâ g·µâ X·µâ
  pr2·µâ equiv-swap-cocone·µâ = is-equiv-swap-cocone·µâ
```